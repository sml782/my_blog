{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/indigo/source/css/style.less","path":"css/style.less","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/brand.jpg","path":"img/brand.jpg","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/cc.png","path":"img/cc.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/img-err.png","path":"img/img-err.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/img-loading.png","path":"img/img-loading.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/main.min.js","path":"js/main.min.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/search.min.js","path":"js/search.min.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","path":"css/fonts/roboto/Roboto-Bold.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","path":"css/fonts/roboto/Roboto-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","path":"css/fonts/roboto/Roboto-Light.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","path":"css/fonts/roboto/Roboto-Light.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","path":"css/fonts/roboto/Roboto-Light.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","path":"css/fonts/roboto/Roboto-Medium.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","path":"css/fonts/roboto/Roboto-Medium.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","path":"css/fonts/roboto/Roboto-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","path":"css/fonts/roboto/Roboto-Regular.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","path":"css/fonts/roboto/Roboto-Bold.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","path":"css/fonts/roboto/Roboto-Regular.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","path":"css/fonts/roboto/Roboto-Regular.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","path":"css/fonts/roboto/Roboto-Thin.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","path":"css/fonts/roboto/Roboto-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","path":"css/fonts/roboto/Roboto-Thin.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","path":"css/fonts/fontawesome/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","path":"css/fonts/fontawesome/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","path":"css/fonts/roboto/Roboto-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","path":"css/fonts/roboto/Roboto-Light.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","path":"css/fonts/roboto/Roboto-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","path":"css/fonts/roboto/Roboto-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","path":"css/fonts/roboto/Roboto-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","path":"css/fonts/fontawesome/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","path":"css/fonts/fontawesome/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","path":"css/fonts/fontawesome/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","path":"css/fonts/fontawesome/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/alipay.png","path":"img/alipay.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/wechat.jpg","path":"img/wechat.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/indigo/.editorconfig","hash":"9b0445427777519defe360ea38c61729d847b3d3","modified":1529993893000},{"_id":"themes/indigo/LICENSE","hash":"24944bf7920108f5a4790e6071c32e9102760c37","modified":1529993893000},{"_id":"themes/indigo/README.md","hash":"4bf26d9b43bf24b8e0a1a0d058437a347972f5e6","modified":1529993893000},{"_id":"themes/indigo/_config.yml","hash":"dbf22c13611f494b22bfa1c29a866ac6c25ecfa0","modified":1530454309920},{"_id":"themes/indigo/package.json","hash":"0ef01e26a514d612fd7fb98b0bab05f9c92b7547","modified":1529994637000},{"_id":"source/_posts/hello-world.md","hash":"da9fae7eac06a4fc4818b913c57a3b778ae47157","modified":1530003671000},{"_id":"source/_posts/laozhu.md","hash":"7d2c3209bfb9c82be6c327f91b891fcb84a2e575","modified":1530431784165},{"_id":"source/_posts/test-word.md","hash":"46b517a4d9cec1baae2da4071b762d0683f1ba49","modified":1530431081892},{"_id":"source/categories/index.md","hash":"9bdf77b9fba386cf142cc799120cad41a8048eff","modified":1530069403000},{"_id":"source/tags/index.md","hash":"88a3afd16c1a4ebf599f29da4161381b29e402e9","modified":1530069413000},{"_id":"themes/indigo/.git/HEAD","hash":"da237e0de55301608e7c572e119ab5c4e43c0e85","modified":1529993893000},{"_id":"themes/indigo/.git/config","hash":"ad7f294e99db5c98f19132b2670141fe40d333c8","modified":1529993869000},{"_id":"themes/indigo/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1529993526000},{"_id":"themes/indigo/.git/index","hash":"12f6c70c0a41353ceca0e50c9f5e24e7f451e2d1","modified":1529995857000},{"_id":"themes/indigo/.git/packed-refs","hash":"8d23deb22f1c0a29dd88b28c901be181fe9862dc","modified":1529993534000},{"_id":"themes/indigo/languages/en.yml","hash":"1957d2bfc3a4cef299f4f169b431e9b1128ba162","modified":1529993893000},{"_id":"themes/indigo/languages/ja.yml","hash":"74fd480874bf5e773ba7f9d2a94697cda979091f","modified":1529993893000},{"_id":"themes/indigo/languages/nl-NL","hash":"9085c04491f93066f2369911cc2175b59ae596ad","modified":1529993893000},{"_id":"themes/indigo/languages/zh-CN.yml","hash":"7dc6ae434dde390b6768d244132e23cc78c33817","modified":1529993893000},{"_id":"themes/indigo/languages/zh-TW.yml","hash":"6a9e820be66eb12ae746f2527e0dc1adf927c685","modified":1529993893000},{"_id":"themes/indigo/layout/archive.ejs","hash":"d039719e21f6a6fa2925b00aaa623a180a78c818","modified":1529993893000},{"_id":"themes/indigo/layout/categories.ejs","hash":"41783d2069d5080566a99e6312aa2113105f8b41","modified":1529993893000},{"_id":"themes/indigo/layout/category.ejs","hash":"7ea26a8a935886963eda82f41c7bd5270cf780d9","modified":1529993893000},{"_id":"themes/indigo/layout/index.ejs","hash":"39477807b98b2d2df78f3b82498a11e90be8222c","modified":1529993893000},{"_id":"themes/indigo/layout/layout.ejs","hash":"d52f43fa9572d70cae834e4887c8897b43744805","modified":1529993893000},{"_id":"themes/indigo/layout/page.ejs","hash":"afb98face24d39a21ebbbde6592a9afc98572aa4","modified":1529993893000},{"_id":"themes/indigo/layout/post.ejs","hash":"afbf8532dc8d148ca4dff2ca127a3382907cf2f5","modified":1529993893000},{"_id":"themes/indigo/layout/tag.ejs","hash":"36786a3de7f6cad58209603f7d84ba23addea174","modified":1529993893000},{"_id":"themes/indigo/layout/tags.ejs","hash":"20466446c41409d14a3d42ccaec24a65a045efef","modified":1529993893000},{"_id":"themes/indigo/scripts/plugins.js","hash":"e439d717513616bedeed37ba9b05117470809b21","modified":1529993893000},{"_id":"themes/indigo/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1529993526000},{"_id":"themes/indigo/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1529993526000},{"_id":"themes/indigo/.git/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1529993526000},{"_id":"themes/indigo/.git/logs/HEAD","hash":"da488aa8f953e9da474baaf0ae4a437708931dbd","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/archive.ejs","hash":"55cd81ef9183426d6d99fd91550fce0a9cc92aa0","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/after-footer.ejs","hash":"9ac30b9439fab69973cf4722dbf2945a18fd3804","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/footer.ejs","hash":"e1a71a30a1c7a664ddf3ba3e7eb3a5b90bc4b33c","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/head.ejs","hash":"02a95a88774cc50dbcc32242b6c8ac7e9d9028bb","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/header.ejs","hash":"6156bf20791e46fc1c5872113276c1c1f5c13773","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/index-item.ejs","hash":"ec7b3ec79bbbead9c7e43e2e6c6b5c8bef509410","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/loading.ejs","hash":"bc4cb19b20de55a0332647f4dca9684184383685","modified":1529993534000},{"_id":"themes/indigo/layout/_partial/menu.ejs","hash":"d39afaad6b0dd2a3ae27e6db3e9a6cd6014622fa","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/paginator.ejs","hash":"dc27242927890f130a64400596b9b7ad5fca8972","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post.ejs","hash":"a87d9b0485b3bf4cdfdad890e5974c43dbaa8240","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/script.ejs","hash":"439d6315a1b16e32b77a68c3f0cb2961d581086a","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/search.ejs","hash":"c2091c621b5480ef1e69d72027028cec8e929892","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/tags-bar.ejs","hash":"19eff4876d31080a427644f7a43fe172d0c008c6","modified":1529993893000},{"_id":"themes/indigo/source/css/style.less","hash":"f22d4146e0bdb4485d33f20080c67ba05724afea","modified":1529993893000},{"_id":"themes/indigo/source/img/alipay.jpg","hash":"6054d9ed2ca7cd1f645b729e05632134467d4daa","modified":1529993534000},{"_id":"themes/indigo/source/img/avatar.jpg","hash":"62a4893b1a32e997dcdb6e467b10559df75221e2","modified":1529993893000},{"_id":"themes/indigo/source/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1529993534000},{"_id":"themes/indigo/source/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1529993534000},{"_id":"themes/indigo/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1529993534000},{"_id":"themes/indigo/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1529993534000},{"_id":"themes/indigo/source/img/wechat.jpg","hash":"c13e977e1cd72ccd3d15e1e65339ae32ef074b88","modified":1530427806162},{"_id":"themes/indigo/source/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1529993893000},{"_id":"themes/indigo/source/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1529993893000},{"_id":"themes/indigo/source/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1529993893000},{"_id":"themes/indigo/source/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1529993893000},{"_id":"themes/indigo/.git/objects/pack/pack-6cd489afe735b98d38fe69acb5d3079d71886cd7.idx","hash":"2933bcdc38eec26d2a3c9f8d9a008f4daa4a4be4","modified":1529993534000},{"_id":"themes/indigo/.git/refs/heads/card","hash":"484dfa35ff9eb7a589991d8ca81ef961cd2a4ea6","modified":1529993534000},{"_id":"themes/indigo/.git/refs/heads/master","hash":"a84af794bb0b8c69d6c32c87c06cd270f88874fb","modified":1529993869000},{"_id":"themes/indigo/layout/_partial/post/category.ejs","hash":"c7476165721a3a5e34d00d8c5c07e1e5474cd800","modified":1529993534000},{"_id":"themes/indigo/layout/_partial/post/comment.ejs","hash":"bcc3bd7a9023d71778f15e98c88552335ae69a69","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/copyright.ejs","hash":"5305ed30ee35cf50f87656737d0ffe85f5bfc16b","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/date.ejs","hash":"ea85b46e12d3b9c3612eef7aa76289a663fbc096","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/head-meta.ejs","hash":"b0c680ce5b8aaf461a6731b1ff1287bd140c168a","modified":1529993534000},{"_id":"themes/indigo/layout/_partial/post/reward-btn.ejs","hash":"41c242fe3159dc68cec8dd00ab6d2663f5a51179","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/nav.ejs","hash":"11e7d504f7c7a3c4c052da13cfa8ea4862c9383e","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/reward.ejs","hash":"23719e09689b3afbb19214c6603eb02f896cb9ba","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/share-fab.ejs","hash":"93482ad7d1e01b966f5ee1c5d12b88564e02b349","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/share.ejs","hash":"8df0d7bf6f8e106cdbdac2dd10a97367aa0695f8","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/title.ejs","hash":"062d56cb88ae2be3a6616b911d4ebeffcbfe3cff","modified":1529993534000},{"_id":"themes/indigo/layout/_partial/post/tag.ejs","hash":"b3dc38652c4a018a37418136478dcd522fc49f79","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/toc.ejs","hash":"ad287a70724eb7cd8cd2a03a45b68032ee99973d","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/post/updated.ejs","hash":"5caa71745aa340ce57938a930f3b898ee7518d74","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/baidu.ejs","hash":"e44d526029f122e9c2c74f3a647c35002c818cbe","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/disqus.ejs","hash":"4a0c01e4195f685f9825fcd016d01249dbdd52ca","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/dynamic-title.ejs","hash":"23c101d45911eb0846533aaa2d409c43aa5e899a","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/gitment.ejs","hash":"5723d507eca4390e8e5d18c0770e7953b8c22f5a","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/google-analytics.ejs","hash":"a947f4076b54b48d4df5baf2d5b3c39b632c7576","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/hyper-comments.ejs","hash":"e5a83acc7c2e385b0c9abf428e86e8fdfd3a5202","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/mathjax.ejs","hash":"ea603a057196de53bd6afab1fddb93d11f27eb81","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/page-visit.ejs","hash":"2decb77bf3c1a064ea6ce1d4e78892c434d9c884","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/site-visit.ejs","hash":"8fbd0910828f1ab6eba728bdecc9811d623baae2","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/tajs.ejs","hash":"97b48fe10be1c71d4ff25ccec3bd92d97466c9c5","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/uyan.ejs","hash":"e370bd04ea5cf1c83e0c20516aff7ba3ca8b2d0b","modified":1529993893000},{"_id":"themes/indigo/layout/_partial/plugins/valine.ejs","hash":"a976ca36bd09aeb2902bf94fcc7a59975ea25148","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/archives.less","hash":"7d2a6886265386c640e94ffca3f042675f701a35","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/article.less","hash":"d476cd3537bcd8a02d055cc223f5c805b8638cc2","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/gotop.less","hash":"b7db31b9bc563c10b9e3cf3e6d9cfddfeb3e805a","modified":1529993534000},{"_id":"themes/indigo/source/css/_partial/header.less","hash":"90f0948a9182c14b1dac1e9dbed3c883543266f9","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/highlight.less","hash":"58492b7cdb45fe09b026b2f34e8ae69c2ddb8228","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/layout.less","hash":"4390ed22abad59c8b28ed1a479a52f15b5f9cf4a","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/lightbox.less","hash":"9b961eb1d70e7658f42cf2ca895fa5e35a6b6541","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/loading.less","hash":"f9d06a1e24fb4857fd18d7a0bfbb3a0ab2d1c742","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/page.less","hash":"e92ccb53e6ac73a51498c6a9672db9d0d2bc7f1a","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/postlist.less","hash":"1c041bf91106808e5480c60d9ece45431bb503b3","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/reward.less","hash":"4857f90bb57fc22ca3f942d8934d86d5e9e82c1e","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/roboto.less","hash":"2e0469ed8161d5672d903ca1a8027cd65fe007f1","modified":1529993534000},{"_id":"themes/indigo/source/css/_partial/search.less","hash":"1d6641ae7568a0153d24beba9fd9704d2b155f6c","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/share.less","hash":"27d80bcc96a53dd1e7eaa9a7d746e4b212357302","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/tags.less","hash":"959f4373fda6e45f6a4041a995ed3ea8a05a5170","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/variable.less","hash":"082896b966ed25b39c74e7b007b4f54c235685a4","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/waves.less","hash":"77bfd0b373b0469eb0176167fb076ccda4edf2a7","modified":1529993893000},{"_id":"themes/indigo/source/css/_plugin/valine.less","hash":"ddbb7647d83f732f9b0d5d817d40a748006949cc","modified":1529993893000},{"_id":"themes/indigo/source/css/_partial/fontawesome.less","hash":"ca30b732d2efbb0cd55a272ecdabc97f895aee78","modified":1529993893000},{"_id":"themes/indigo/.git/logs/refs/heads/master","hash":"7211fa51e52d101b88dd1acb174852e9eb642b27","modified":1529993869000},{"_id":"themes/indigo/.git/logs/refs/heads/card","hash":"86d05ba8e89f87b102045f30c1bc0b13bc11ee88","modified":1529993534000},{"_id":"themes/indigo/.git/refs/remotes/origin/HEAD","hash":"7f141be72288af81f8e55d94df5da3f87101e8f1","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1529993893000},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1529993893000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1529993534000},{"_id":"themes/indigo/.git/logs/refs/remotes/origin/HEAD","hash":"86d05ba8e89f87b102045f30c1bc0b13bc11ee88","modified":1529993534000},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1529993893000},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1529993893000},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1529993893000},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1529993893000},{"_id":"themes/indigo/.git/objects/pack/pack-6cd489afe735b98d38fe69acb5d3079d71886cd7.pack","hash":"4bc1a149fe83923cf0ec31558499df08d7270e31","modified":1529993534000},{"_id":"public/atom.xml","hash":"2cb13abd05b87affd8d3845fb372796950fa2344","modified":1530552772611},{"_id":"public/content.json","hash":"732bd55e3f29b7228ef64a0562fdc82ee63bd51f","modified":1530552772790},{"_id":"public/categories/index.html","hash":"c6b745a941206277f1d4fc848c7c3218818c0a11","modified":1530552772827},{"_id":"public/tags/index.html","hash":"d30194adbeb4348f93dc6fd7888094a77e72ecb3","modified":1530552772828},{"_id":"public/archives/index.html","hash":"47f29c5e4071dd73904b037c888ba7a9a5b601f1","modified":1530552772828},{"_id":"public/archives/2018/index.html","hash":"6afdd6d263baf88ffab0937146d078408b522000","modified":1530552772828},{"_id":"public/archives/2018/06/index.html","hash":"574d76d6a3f65c1e03d62c27a9bb07d81e7d4208","modified":1530075832669},{"_id":"public/index.html","hash":"dc31dbee559e1a56f021ba446ecceb94a91bfc60","modified":1530552772828},{"_id":"public/tags/网站/index.html","hash":"9a251761c9f7a3c6a7e18648b3d3608071faf333","modified":1530075832669},{"_id":"public/tags/前端/index.html","hash":"b32643d6bae2e330ccd75cae286fe0e43d85dbac","modified":1530075832669},{"_id":"public/2018/06/26/test-word/index.html","hash":"24d854e78defc68643177521f6f7d369bd64d5d8","modified":1530075832669},{"_id":"public/tags/test/index.html","hash":"a1bfb12ab58c7ebc3c9e8b8a750f20b882fc8e18","modified":1530075832669},{"_id":"public/2018/06/26/laozhu/index.html","hash":"9313bcf0ad0345ad21503f1ed3633cb9fdc52b18","modified":1530075832669},{"_id":"source/_posts/lll.md","hash":"07f3d29d31e53d64d367d0f4ca7fd8451c619c8d","modified":1530004049000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1530004279000},{"_id":"themes/indigo/source/img/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1530066399000},{"_id":"themes/indigo/source/img/alipay.png","hash":"d696d0b770df6f70bd3adad3ce590afe99c6fb08","modified":1530066236000},{"_id":"themes/indigo/source/img/wechat.JPG","hash":"c13e977e1cd72ccd3d15e1e65339ae32ef074b88","modified":1530066349000},{"_id":"source/_posts/test-PP.md","hash":"e87b7d7d8ccf29e79990ac40d497488021bde4c5","modified":1530431076583},{"_id":"public/tags/Test/index.html","hash":"9fd8c3a6de28ca874fa9e72bd234e07d3801663d","modified":1530075832669},{"_id":"public/categories/测试/index.html","hash":"6b4b30775043962554604c38a290c9933088759a","modified":1530075832671},{"_id":"public/categories/前端/index.html","hash":"f5dc161ca26b96f70df4ce0ca8896256d3a735ab","modified":1530075832671},{"_id":"public/2018/06/27/test-PP/index.html","hash":"b2b758a05288e7c2283d7ae99754cddc59abf112","modified":1530075832671},{"_id":"public/img/alipay.png","hash":"d696d0b770df6f70bd3adad3ce590afe99c6fb08","modified":1530552772860},{"_id":"source/_posts/blog.md","hash":"a1eda81ab0d572fde0d4890385d94858745ba12c","modified":1530431118918},{"_id":"source/_posts/js_closure.md","hash":"bd7647cf5b92d47734b39d5e3759939dc4b5fda0","modified":1530453980990},{"_id":"public/archives/2018/07/index.html","hash":"feab86dc09a0b503934998ccf694ded3003b2eea","modified":1530552772828},{"_id":"public/tags/First/index.html","hash":"2024ac45ea18d2a65b341f202e277f8248070bfe","modified":1530552772828},{"_id":"public/2018/07/01/blog/index.html","hash":"43a61ac0f303b5ab454d33ccc85f43ca00ca14d4","modified":1530552772829},{"_id":"public/categories/JS/index.html","hash":"2a7dc6e33ca1743d78e307550a3d6ef2c4b63beb","modified":1530552772828},{"_id":"public/tags/闭包/index.html","hash":"4fa83d38df55bf4491e8875b4ea54f4dd927c2a4","modified":1530552772828},{"_id":"public/2018/07/01/js_closure/index.html","hash":"ed596eabc2ae7fae8a435977b78f3251f2cc6a38","modified":1530552772829},{"_id":"public/img/avatar.jpg","hash":"62a4893b1a32e997dcdb6e467b10559df75221e2","modified":1530552772835},{"_id":"public/img/brand.jpg","hash":"0e237f1b433851c156e1f1cdaeb044054b3b9879","modified":1530552772835},{"_id":"public/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1530552772835},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1530552772835},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1530552772835},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1530552772836},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1530552772836},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1530552772859},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1530552772859},{"_id":"public/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1530552772859},{"_id":"public/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1530552772859},{"_id":"public/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1530552772859},{"_id":"public/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1530552772860},{"_id":"public/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1530552772860},{"_id":"public/img/wechat.jpg","hash":"c13e977e1cd72ccd3d15e1e65339ae32ef074b88","modified":1530552772860},{"_id":"public/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1530552772864},{"_id":"public/js/search.js","hash":"a1de7e7a2ef8330ebcd9f3a7a4622b3bac44e4f3","modified":1530552772864},{"_id":"public/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1530552772864},{"_id":"public/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1530552772864},{"_id":"public/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1530552772864},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1530552772865},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1530552772864},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1530552772876},{"_id":"public/css/style.css","hash":"27f88e278b738328b5acd28e88b5cb20daa490e6","modified":1530552773186},{"_id":"source/_posts/oop_extend.md","hash":"2a45d5cb11e27f22d516a4eed6b480c321f0a463","modified":1530552288816},{"_id":"public/tags/面向对象/index.html","hash":"80c6a94b92e1194d0be37e33c34d6ba2bbf9061e","modified":1530552772828},{"_id":"public/tags/继承/index.html","hash":"2249b2d2eff51dbef28001063c640b31a81d1ea6","modified":1530552772828},{"_id":"public/2018/07/02/oop_extend/index.html","hash":"d600604860da9ad955f20b184a7cdc5ba489acd1","modified":1530552772829}],"Category":[{"name":"测试","_id":"cjiwk65kq0000uur4fd3ipphb"},{"name":"前端","_id":"cjiwk6gg40002uur4hkz7nvh6"},{"name":"JS","_id":"cjj2jvthg00045uhgp27wbc62"}],"Data":[],"Page":[{"title":"分类","comments":0,"date":"2018-06-26T06:26:18.000Z","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ncomments: false\ndate: 2018-06-26 14:26:18\nlayout: categories\n---\n","updated":"2018-06-27T03:16:43.000Z","path":"categories/index.html","_id":"cjivgw1y2000b67r48bz2h4n2","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"标签","comments":0,"date":"2018-06-26T06:24:55.000Z","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ncomments: false\ndate: 2018-06-26 14:24:55\nlayout: tags\n---\n","updated":"2018-06-27T03:16:53.000Z","path":"tags/index.html","_id":"cjivgw1y3000c67r4rasssnvs","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Hello World","date":"2018-06-26T06:54:45.000Z","published":0,"_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\ndate: 2018-06-26 14:54:45\ntags: [ hello ]\npublished: false\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","updated":"2018-06-26T09:01:11.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjivgw1xh000067r4av45d7bl","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"老朱","date":"2018-06-26T09:01:52.000Z","published":0,"_content":"# 老朱的屌炸了\n\n* vue\n\n```vue\n<template>\n     <div>\n         <template v-for=\"item in list\">\n              <p>{{item.content}}</p>\n              <img :src=\"item.img\" alt=\"\">\n              <p class=\"divider\"></p>\n         </template>\n     </div>\n</template>\n\n<script>\nexport default {\n     data () {\n         return {\n             list : [\n                 {content : 'ziksang',img :'https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1301074775,1382810875&fm=80&w=179&h=119&img.JPEG'},\n                 {content : 'ziksang2',img :'https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1312092207,1376369244&fm=80&w=179&h=119&img.JPEG'}\n             ]\n         }\n     }\n}\n</script>\n<style>\nbody,html{\n    width:100%;\n    height:100%\n}\n.divider{\n    width:100%;\n    height:1px;\n    background:black;\n}\n</style>\n```","source":"_posts/laozhu.md","raw":"---\ntitle: 老朱\ndate: 2018-06-26 17:01:52\ntags: [ test ]\npublished: false\n---\n# 老朱的屌炸了\n\n* vue\n\n```vue\n<template>\n     <div>\n         <template v-for=\"item in list\">\n              <p>{{item.content}}</p>\n              <img :src=\"item.img\" alt=\"\">\n              <p class=\"divider\"></p>\n         </template>\n     </div>\n</template>\n\n<script>\nexport default {\n     data () {\n         return {\n             list : [\n                 {content : 'ziksang',img :'https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1301074775,1382810875&fm=80&w=179&h=119&img.JPEG'},\n                 {content : 'ziksang2',img :'https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1312092207,1376369244&fm=80&w=179&h=119&img.JPEG'}\n             ]\n         }\n     }\n}\n</script>\n<style>\nbody,html{\n    width:100%;\n    height:100%\n}\n.divider{\n    width:100%;\n    height:1px;\n    background:black;\n}\n</style>\n```","slug":"laozhu","updated":"2018-07-01T07:56:24.165Z","_id":"cjivgw1xk000167r4epcrgu1g","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"老朱的屌炸了\"><a href=\"#老朱的屌炸了\" class=\"headerlink\" title=\"老朱的屌炸了\"></a>老朱的屌炸了</h1><ul>\n<li>vue</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">     &lt;div&gt;</span><br><span class=\"line\">         &lt;template v-for=&quot;item in list&quot;&gt;</span><br><span class=\"line\">              &lt;p&gt;&#123;&#123;item.content&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">              &lt;img :src=&quot;item.img&quot; alt=&quot;&quot;&gt;</span><br><span class=\"line\">              &lt;p class=&quot;divider&quot;&gt;&lt;/p&gt;</span><br><span class=\"line\">         &lt;/template&gt;</span><br><span class=\"line\">     &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">     data () &#123;</span><br><span class=\"line\">         return &#123;</span><br><span class=\"line\">             list : [</span><br><span class=\"line\">                 &#123;content : &apos;ziksang&apos;,img :&apos;https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1301074775,1382810875&amp;fm=80&amp;w=179&amp;h=119&amp;img.JPEG&apos;&#125;,</span><br><span class=\"line\">                 &#123;content : &apos;ziksang2&apos;,img :&apos;https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1312092207,1376369244&amp;fm=80&amp;w=179&amp;h=119&amp;img.JPEG&apos;&#125;</span><br><span class=\"line\">             ]</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">body,html&#123;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:100%</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.divider&#123;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:1px;</span><br><span class=\"line\">    background:black;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"老朱的屌炸了\"><a href=\"#老朱的屌炸了\" class=\"headerlink\" title=\"老朱的屌炸了\"></a>老朱的屌炸了</h1><ul>\n<li>vue</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">     &lt;div&gt;</span><br><span class=\"line\">         &lt;template v-for=&quot;item in list&quot;&gt;</span><br><span class=\"line\">              &lt;p&gt;&#123;&#123;item.content&#125;&#125;&lt;/p&gt;</span><br><span class=\"line\">              &lt;img :src=&quot;item.img&quot; alt=&quot;&quot;&gt;</span><br><span class=\"line\">              &lt;p class=&quot;divider&quot;&gt;&lt;/p&gt;</span><br><span class=\"line\">         &lt;/template&gt;</span><br><span class=\"line\">     &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">     data () &#123;</span><br><span class=\"line\">         return &#123;</span><br><span class=\"line\">             list : [</span><br><span class=\"line\">                 &#123;content : &apos;ziksang&apos;,img :&apos;https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1301074775,1382810875&amp;fm=80&amp;w=179&amp;h=119&amp;img.JPEG&apos;&#125;,</span><br><span class=\"line\">                 &#123;content : &apos;ziksang2&apos;,img :&apos;https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1312092207,1376369244&amp;fm=80&amp;w=179&amp;h=119&amp;img.JPEG&apos;&#125;</span><br><span class=\"line\">             ]</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">body,html&#123;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:100%</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.divider&#123;</span><br><span class=\"line\">    width:100%;</span><br><span class=\"line\">    height:1px;</span><br><span class=\"line\">    background:black;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>"},{"title":"test_word","date":"2018-06-26T06:54:45.000Z","published":0,"_content":"# First One\n## Second Two\n---\n* 这是react\n```jsx\nimport(1);\nclass Aone extends React.Componet {\n    render () {\n        const b = `2`;\n        return (\n            <div>Hello word! {b}</div>\n        )\n    }\n}\nexport default Aone;\n```","source":"_posts/test-word.md","raw":"---\ntitle: test_word\ndate: 2018-06-26 14:54:45\ncategories: [ 前端 ]\ntags: [ 网站, 前端 ]\npublished: false\n---\n# First One\n## Second Two\n---\n* 这是react\n```jsx\nimport(1);\nclass Aone extends React.Componet {\n    render () {\n        const b = `2`;\n        return (\n            <div>Hello word! {b}</div>\n        )\n    }\n}\nexport default Aone;\n```","slug":"test-word","updated":"2018-07-01T07:44:41.892Z","_id":"cjivgw1xo000367r4lgay4k2r","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"First-One\"><a href=\"#First-One\" class=\"headerlink\" title=\"First One\"></a>First One</h1><h2 id=\"Second-Two\"><a href=\"#Second-Two\" class=\"headerlink\" title=\"Second Two\"></a>Second Two</h2><hr>\n<ul>\n<li>这是react<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Aone</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Componet</span> </span>&#123;</span><br><span class=\"line\">    render () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> b = <span class=\"string\">`2`</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            &lt;div&gt;Hello word! &#123;b&#125;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        )</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">export default Aone;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"First-One\"><a href=\"#First-One\" class=\"headerlink\" title=\"First One\"></a>First One</h1><h2 id=\"Second-Two\"><a href=\"#Second-Two\" class=\"headerlink\" title=\"Second Two\"></a>Second Two</h2><hr>\n<ul>\n<li>这是react<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Aone</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Componet</span> </span>&#123;</span><br><span class=\"line\">    render () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> b = <span class=\"string\">`2`</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (</span><br><span class=\"line\">            &lt;div&gt;Hello word! &#123;b&#125;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        )</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">export default Aone;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"test_word","date":"2018-06-27T02:54:45.000Z","published":0,"_content":"# First One\n## Second Two\n---\n* \n```jsx\nimport(1);\n```","source":"_posts/test-PP.md","raw":"---\ntitle: test_word\ndate: 2018-06-27 10:54:45\ncategories: [ 测试 ]\ntags: [ 网站, Test ]\npublished: false\n---\n# First One\n## Second Two\n---\n* \n```jsx\nimport(1);\n```","slug":"test-PP","updated":"2018-07-01T07:44:36.583Z","_id":"cjiwj9kgf0003ior4r39kfnq0","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"First-One\"><a href=\"#First-One\" class=\"headerlink\" title=\"First One\"></a>First One</h1><h2 id=\"Second-Two\"><a href=\"#Second-Two\" class=\"headerlink\" title=\"Second Two\"></a>Second Two</h2><hr>\n<ul>\n<li><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"First-One\"><a href=\"#First-One\" class=\"headerlink\" title=\"First One\"></a>First One</h1><h2 id=\"Second-Two\"><a href=\"#Second-Two\" class=\"headerlink\" title=\"Second Two\"></a>Second Two</h2><hr>\n<ul>\n<li><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"为什么要写博客","date":"2018-07-01T07:38:40.000Z","_content":"# 一、前言：你的博客你做主\n\n在我刚入行时，还是个普通人，毕竟我的专业也是学这个的，每天浏览各种技术博客和论坛。可时间长了，我就发现，你不用Google真的就搜不出来你想要的东西，即使搜出来了，博客上所写的内容，零零散散，也不能满足你，你还要去搜，去找，等到各方面找全了，开始实际作战了，本地应用又会出现问题（很好理解，你本地的各种环境可能和网上不一样），为了解决问题，你还是会去搜索找博客，结果呢还是像上面一样，时间都浪费在了搜集资料和整理上，大家的项目都是公司项目，这边你还没等处理完问题，老板就来催了，加班自然跑不了。 \n其实没有所谓的好的博客，你自己写的博客，排不排版，贴不贴图，公不公开，都是随你，你开心就好。但是真的想要访问量高、评论数多，充分显示出你的专业性，还是需要下一番功夫去思考的。所以本文是一篇专业水文，建议在各种碎片化时间服用。\n\n# 二、写博客的态度\n\n你为什么想写博客？给别人看？给自己看？还有吗？你写博客时意识到自己在做什么吗？你会说码字啊。呵呵。在我看来，你写博客的过程就是在创造资源，为世界上成PB量级的数据做贡献。只不过这个资源有好有坏。如果谈到资源，就会涉及管理、使用、销毁等等。你不止是在写博客，而是在梳理你的知识技能，构建你的知识体系，在创造属于你自己的知识宝库。有那样一句玩笑话：一入IT深似海，从此妹子是路人，也侧面说明了IT行业知识、技术相当广和深，我们更需要通过博客进行知识的积累。只是你没意识到这一点，所以你才会随随便便写了两篇博客，然后就放弃了。如果你能坚持的去写一些高质量的博客，相信我，无论你何时回翻看这些博客，你都会有一种自豪感。\n\n# 三、高质量技术博客的特点\n\n来源权威，有因有果，可迭代，互动性，不啰嗦，最好是原创。","source":"_posts/blog.md","raw":"---\ntitle: 为什么要写博客\ndate: 2018-07-01 15:38:40\ntags: [ First ]\n---\n# 一、前言：你的博客你做主\n\n在我刚入行时，还是个普通人，毕竟我的专业也是学这个的，每天浏览各种技术博客和论坛。可时间长了，我就发现，你不用Google真的就搜不出来你想要的东西，即使搜出来了，博客上所写的内容，零零散散，也不能满足你，你还要去搜，去找，等到各方面找全了，开始实际作战了，本地应用又会出现问题（很好理解，你本地的各种环境可能和网上不一样），为了解决问题，你还是会去搜索找博客，结果呢还是像上面一样，时间都浪费在了搜集资料和整理上，大家的项目都是公司项目，这边你还没等处理完问题，老板就来催了，加班自然跑不了。 \n其实没有所谓的好的博客，你自己写的博客，排不排版，贴不贴图，公不公开，都是随你，你开心就好。但是真的想要访问量高、评论数多，充分显示出你的专业性，还是需要下一番功夫去思考的。所以本文是一篇专业水文，建议在各种碎片化时间服用。\n\n# 二、写博客的态度\n\n你为什么想写博客？给别人看？给自己看？还有吗？你写博客时意识到自己在做什么吗？你会说码字啊。呵呵。在我看来，你写博客的过程就是在创造资源，为世界上成PB量级的数据做贡献。只不过这个资源有好有坏。如果谈到资源，就会涉及管理、使用、销毁等等。你不止是在写博客，而是在梳理你的知识技能，构建你的知识体系，在创造属于你自己的知识宝库。有那样一句玩笑话：一入IT深似海，从此妹子是路人，也侧面说明了IT行业知识、技术相当广和深，我们更需要通过博客进行知识的积累。只是你没意识到这一点，所以你才会随随便便写了两篇博客，然后就放弃了。如果你能坚持的去写一些高质量的博客，相信我，无论你何时回翻看这些博客，你都会有一种自豪感。\n\n# 三、高质量技术博客的特点\n\n来源权威，有因有果，可迭代，互动性，不啰嗦，最好是原创。","slug":"blog","published":1,"updated":"2018-07-01T07:45:18.918Z","_id":"cjj2iwmav00005uhgkljwhwz4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"一、前言：你的博客你做主\"><a href=\"#一、前言：你的博客你做主\" class=\"headerlink\" title=\"一、前言：你的博客你做主\"></a>一、前言：你的博客你做主</h1><p>在我刚入行时，还是个普通人，毕竟我的专业也是学这个的，每天浏览各种技术博客和论坛。可时间长了，我就发现，你不用Google真的就搜不出来你想要的东西，即使搜出来了，博客上所写的内容，零零散散，也不能满足你，你还要去搜，去找，等到各方面找全了，开始实际作战了，本地应用又会出现问题（很好理解，你本地的各种环境可能和网上不一样），为了解决问题，你还是会去搜索找博客，结果呢还是像上面一样，时间都浪费在了搜集资料和整理上，大家的项目都是公司项目，这边你还没等处理完问题，老板就来催了，加班自然跑不了。<br>其实没有所谓的好的博客，你自己写的博客，排不排版，贴不贴图，公不公开，都是随你，你开心就好。但是真的想要访问量高、评论数多，充分显示出你的专业性，还是需要下一番功夫去思考的。所以本文是一篇专业水文，建议在各种碎片化时间服用。</p>\n<h1 id=\"二、写博客的态度\"><a href=\"#二、写博客的态度\" class=\"headerlink\" title=\"二、写博客的态度\"></a>二、写博客的态度</h1><p>你为什么想写博客？给别人看？给自己看？还有吗？你写博客时意识到自己在做什么吗？你会说码字啊。呵呵。在我看来，你写博客的过程就是在创造资源，为世界上成PB量级的数据做贡献。只不过这个资源有好有坏。如果谈到资源，就会涉及管理、使用、销毁等等。你不止是在写博客，而是在梳理你的知识技能，构建你的知识体系，在创造属于你自己的知识宝库。有那样一句玩笑话：一入IT深似海，从此妹子是路人，也侧面说明了IT行业知识、技术相当广和深，我们更需要通过博客进行知识的积累。只是你没意识到这一点，所以你才会随随便便写了两篇博客，然后就放弃了。如果你能坚持的去写一些高质量的博客，相信我，无论你何时回翻看这些博客，你都会有一种自豪感。</p>\n<h1 id=\"三、高质量技术博客的特点\"><a href=\"#三、高质量技术博客的特点\" class=\"headerlink\" title=\"三、高质量技术博客的特点\"></a>三、高质量技术博客的特点</h1><p>来源权威，有因有果，可迭代，互动性，不啰嗦，最好是原创。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"一、前言：你的博客你做主\"><a href=\"#一、前言：你的博客你做主\" class=\"headerlink\" title=\"一、前言：你的博客你做主\"></a>一、前言：你的博客你做主</h1><p>在我刚入行时，还是个普通人，毕竟我的专业也是学这个的，每天浏览各种技术博客和论坛。可时间长了，我就发现，你不用Google真的就搜不出来你想要的东西，即使搜出来了，博客上所写的内容，零零散散，也不能满足你，你还要去搜，去找，等到各方面找全了，开始实际作战了，本地应用又会出现问题（很好理解，你本地的各种环境可能和网上不一样），为了解决问题，你还是会去搜索找博客，结果呢还是像上面一样，时间都浪费在了搜集资料和整理上，大家的项目都是公司项目，这边你还没等处理完问题，老板就来催了，加班自然跑不了。<br>其实没有所谓的好的博客，你自己写的博客，排不排版，贴不贴图，公不公开，都是随你，你开心就好。但是真的想要访问量高、评论数多，充分显示出你的专业性，还是需要下一番功夫去思考的。所以本文是一篇专业水文，建议在各种碎片化时间服用。</p>\n<h1 id=\"二、写博客的态度\"><a href=\"#二、写博客的态度\" class=\"headerlink\" title=\"二、写博客的态度\"></a>二、写博客的态度</h1><p>你为什么想写博客？给别人看？给自己看？还有吗？你写博客时意识到自己在做什么吗？你会说码字啊。呵呵。在我看来，你写博客的过程就是在创造资源，为世界上成PB量级的数据做贡献。只不过这个资源有好有坏。如果谈到资源，就会涉及管理、使用、销毁等等。你不止是在写博客，而是在梳理你的知识技能，构建你的知识体系，在创造属于你自己的知识宝库。有那样一句玩笑话：一入IT深似海，从此妹子是路人，也侧面说明了IT行业知识、技术相当广和深，我们更需要通过博客进行知识的积累。只是你没意识到这一点，所以你才会随随便便写了两篇博客，然后就放弃了。如果你能坚持的去写一些高质量的博客，相信我，无论你何时回翻看这些博客，你都会有一种自豪感。</p>\n<h1 id=\"三、高质量技术博客的特点\"><a href=\"#三、高质量技术博客的特点\" class=\"headerlink\" title=\"三、高质量技术博客的特点\"></a>三、高质量技术博客的特点</h1><p>来源权威，有因有果，可迭代，互动性，不啰嗦，最好是原创。</p>\n"},{"title":"JavaScript中的闭包","date":"2018-07-01T08:04:02.000Z","published":1,"_content":"# 作用域\n先来说下什么是作用域，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。他减少了名称冲突，并且提供了自动内存管理。\n在JavaScript中，变量的作用域有全局作用域和局部作用域两种。\n\n## 全局作用域\n```js\nvar num1 = 1;\nfunction fun1 (){\n    num2 = 2;\n}\n```\n以上三个对象 `num1`, `num2` 和 `fun1` 均是全局作用域，这里要注意的是 ** 末定义直接赋值的变量自动声明为拥有全局作用域 **；\n\n## 局部作用域\n```js\nfunction wrap(){\n    var obj = \"我被wrap包裹起来了，wrap外部无法直接访问到我\";\n    function innerFun(){\n        //外部无法访问我\n    }\n}\n```\n\n## 作用域链\n当代码在一个环境中执行时，会创建变量对象的一个作用域链。\n[{当前环境的变量对象}，{外层变量对象}，{外层的外层的变量对象}, {window全局变量对象}] 每个数组单元就是作用域链的一块，这个块就是我们的变量对象。\n作用于链的前端，始终都是当前执行的代码所在环境的变量对象。全局执行环境的变量对象也始终都是链的最后一个对象。\n```js\nfunction foo(){\n    var a = 12;\n    fun(a);\n    function fun(a){\n        var b = 8;\n        console.log(a + b);\n    }\n}  \nfoo();\n```\n再来看上面这个简单的例子，我们可以先思考一下，每个执行环境下的变量对象都是什么？ 这两个函数它们的变量对象分别都是什么？\n\n我们以fun为例，当我们调用它时，会创建一个包含 `arguments`，`a`，`b`的 ** 活动对象 **，对于函数而言，在执行的最开始阶段它的活动对象里只包含一个变量，即`arguments`(当执行流进入，再创建其他的活动对象)。\n\n在活动对象中，它依然表示当前参数集合。对于函数的活动对象，我们可以想象成两部分，一个是固定的`arguments`对象，另一部分是函数中的局部变量。而在此例中，a和b都被算入是局部变量中，即便a已经包含在了`arguments中`，但他还是属于。\n\n有没有发现在环境栈中，所有的执行环境都可以组成相对应的作用域链。我们可以在环境栈中非常直观的拼接成一个相对作用域链。\n\n下面我们大致说下这段代码的执行流程：\n  1. 在创建`foo`的时候，作用域链已经预先包含了一个全局对象，并保存在内部属性`[[ Scope ]]`当中。\n  2. 执行`foo`函数，创建执行环境与活动对象后，取出函数的内部属性`[[Scope]]`构建当前环境的作用域链(取出后，只有全局变量对象，然后此时追加了一个它自己的活动对象)。\n  3. 执行过程中遇到了`fun`，从而继续对`fun`使用上一步的操作。\n  4. `fun`执行结束，移出环境栈。`foo`因此也执行完毕，继续移出。\n  5. javscript 监听到`foo`没有被任何变量所引用，开始实施垃圾回收机制，清空占用内存。\n\n作用域链其实就是引用了当前执行环境的变量对象的指针列表，它只是引用，但不是包含，因为它的形状像链条，它的执行过程也非常符合，所以我们都称之为 ** 作用域链 **，而当我们弄懂了这其中的奥秘，就可以抛开这种形式上的束缚，从原理上出发。\n\n# 闭包\n闭包，官方对闭包的解释是：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。\n## 闭包的特点：\n  1. 作为一个函数变量的一个引用，当函数返回时，其处于激活状态。\n  2. 一个闭包就是当一个函数返回时，一个没有释放资源的栈区。\n其实就是 ** 有权访问另一个函数作用域中的变量的函数 **。简单说就是，假设函数a是定义在函数b中的函数，那么函数a就是一个闭包。正常情况下，在函数的外部访问不到函数内部的变量，但有了闭包就可以间接的实现访问内部变量的需要。也就是说，** 闭包是连接函数内部和外部的桥梁 **。\n## 闭包的作用\n  1. 访问函数内部的变量。\n  2. 让被引用的变量值始终保持在内存中。\n\n```js\nfunction fn1(){\n    var a = 1;\n    return function(){\n        console.log(++a);\n    }\n\n}\n\nvar fn2 = fn1();\n\nfn2();        //输出2\n\nfn2();        //输出3\n```\n在这段代码中，fn1中的闭包函数被当作结果返回，在闭包中的引用的变量a因为被引用而没有被清除，一直保存在内存当中，所以执行fn2的时候会输出不断增加的结果：2和3。\n\n当闭包中引用了函数中的变量时，那么，这个变量就会保存在内存中。也就是上面提到的闭包的第二个作用。之所以为这样，是因为JavaScript的回收机制。\n\n基本所有浏览器都是使用“标记清除”的方式回收内存。也就是说，当变量进入执行环境的时候（在函数中声明一个变量），就给变量添加标记，而当函数执行完的，变量不再被引用的时候，再添加删除的标记，垃圾收集器就会自动清楚这个变量占有的内存。但在闭包中引用了函数中的变量，而闭包又被当作结果返回时，闭包中的因为被引用就不会被清除\n\n## 闭包的用途\n1. 匿名自执行函数\n我们知道所有的变量，如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，\n比如：别的函数可能误用这些变量；造成全局对象过于庞大，影响访问速度(因为变量的取值是需要从原型链上遍历的)。\n除了每次使用变量都是用var关键字外，我们在实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，\n比如UI的初始化，那么我们可以使用闭包：\n```js\nvar data= {    \n    table : [],    \n    tree : {}    \n};    \n     \n(function(dm){    \n    for(var i = 0; i < dm.table.rows; i++){    \n        var row = dm.table.rows[i];    \n        for(var j = 0; j < row.cells; i++){    \n            drawCell(i, j);    \n        }    \n    }    \n       \n})(data);\n```\n我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在函数执行完后会立刻释放资源，关键是不污染全局对象。\n\n2. 结果缓存\n我们开发中会碰到很多情况，设想我们有一个处理过程很耗时的函数对象，每次调用都会花费很长时间，\n\n那么我们就需要将计算出来的值存储起来，当调用这个函数的时候，首先在缓存中查找，如果找不到，则进行计算，然后更新缓存并返回值，如果找到了，直接返回查找到的值即可。闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留。\n```js\nvar CachedSearchBox = (function(){    \n    var cache = {},    \n        count = [];    \n    return {    \n        attachSearchBox : function(dsid){    \n            if(dsid in cache){//如果结果在缓存中    \n                return cache[dsid];//直接返回缓存中的对象    \n            }    \n            var fsb = new uikit.webctrl.SearchBox(dsid);//新建    \n            cache[dsid] = fsb;//更新缓存    \n            if(count.length > 100){//保正缓存的大小<=100    \n                delete cache[count.shift()];    \n            }    \n            return fsb;          \n        },    \n     \n        clearSearchBox : function(dsid){    \n            if(dsid in cache){    \n                cache[dsid].clearSelection();      \n            }    \n        }    \n    };    \n})();    \n     \nCachedSearchBox.attachSearchBox(\"input\");\n```\n这样我们在第二次调用的时候，就会从缓存中读取到该对象。\n\n3. 封装\n```js\nvar person = function(){    \n    //变量作用域为函数内部，外部无法访问    \n    var name = \"default\";       \n       \n    return {    \n        getName : function(){    \n            return name;    \n        },    \n        setName : function(newName){    \n            name = newName;    \n        }    \n    }    \n}();    \n     \nprint(person.name);//直接访问，结果为undefined    \nprint(person.getName());    \nperson.setName(\"abruzzi\");    \nprint(person.getName());    \n   \n得到结果如下：  \n   \n// undefined  \n// default  \n// abruzzi\n```\n\n4. 实现类和继承\n```js\nfunction Person(){    \n    var name = \"default\";       \n       \n    return {    \n       getName : function(){    \n           return name;    \n       },    \n       setName : function(newName){    \n           name = newName;    \n       }    \n    }    \n};   \n\nvar p = new Person();\np.setName(\"Tom\");\nalert(p.getName());\n\nvar Jack = function(){};\n//继承自Person\nJack.prototype = new Person();\n//添加私有方法\nJack.prototype.Say = function(){\n    alert(\"Hello,my name is Jack\");\n};\nvar j = new Jack();\nj.setName(\"Jack\");\nj.Say();\nalert(j.getName());\n```\n我们定义了`Person`，它就像一个类，我们`new`一个`Person`对象，访问它的方法。\n\n下面我们定义了`Jack`，继承`Person`，并添加自己的方法。","source":"_posts/js_closure.md","raw":"---\ntitle: JavaScript中的闭包\ndate: 2018-07-01 16:04:02\ntags: [ 闭包 ]\ncategories: [ JS ]\npublished: true\n---\n# 作用域\n先来说下什么是作用域，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。他减少了名称冲突，并且提供了自动内存管理。\n在JavaScript中，变量的作用域有全局作用域和局部作用域两种。\n\n## 全局作用域\n```js\nvar num1 = 1;\nfunction fun1 (){\n    num2 = 2;\n}\n```\n以上三个对象 `num1`, `num2` 和 `fun1` 均是全局作用域，这里要注意的是 ** 末定义直接赋值的变量自动声明为拥有全局作用域 **；\n\n## 局部作用域\n```js\nfunction wrap(){\n    var obj = \"我被wrap包裹起来了，wrap外部无法直接访问到我\";\n    function innerFun(){\n        //外部无法访问我\n    }\n}\n```\n\n## 作用域链\n当代码在一个环境中执行时，会创建变量对象的一个作用域链。\n[{当前环境的变量对象}，{外层变量对象}，{外层的外层的变量对象}, {window全局变量对象}] 每个数组单元就是作用域链的一块，这个块就是我们的变量对象。\n作用于链的前端，始终都是当前执行的代码所在环境的变量对象。全局执行环境的变量对象也始终都是链的最后一个对象。\n```js\nfunction foo(){\n    var a = 12;\n    fun(a);\n    function fun(a){\n        var b = 8;\n        console.log(a + b);\n    }\n}  \nfoo();\n```\n再来看上面这个简单的例子，我们可以先思考一下，每个执行环境下的变量对象都是什么？ 这两个函数它们的变量对象分别都是什么？\n\n我们以fun为例，当我们调用它时，会创建一个包含 `arguments`，`a`，`b`的 ** 活动对象 **，对于函数而言，在执行的最开始阶段它的活动对象里只包含一个变量，即`arguments`(当执行流进入，再创建其他的活动对象)。\n\n在活动对象中，它依然表示当前参数集合。对于函数的活动对象，我们可以想象成两部分，一个是固定的`arguments`对象，另一部分是函数中的局部变量。而在此例中，a和b都被算入是局部变量中，即便a已经包含在了`arguments中`，但他还是属于。\n\n有没有发现在环境栈中，所有的执行环境都可以组成相对应的作用域链。我们可以在环境栈中非常直观的拼接成一个相对作用域链。\n\n下面我们大致说下这段代码的执行流程：\n  1. 在创建`foo`的时候，作用域链已经预先包含了一个全局对象，并保存在内部属性`[[ Scope ]]`当中。\n  2. 执行`foo`函数，创建执行环境与活动对象后，取出函数的内部属性`[[Scope]]`构建当前环境的作用域链(取出后，只有全局变量对象，然后此时追加了一个它自己的活动对象)。\n  3. 执行过程中遇到了`fun`，从而继续对`fun`使用上一步的操作。\n  4. `fun`执行结束，移出环境栈。`foo`因此也执行完毕，继续移出。\n  5. javscript 监听到`foo`没有被任何变量所引用，开始实施垃圾回收机制，清空占用内存。\n\n作用域链其实就是引用了当前执行环境的变量对象的指针列表，它只是引用，但不是包含，因为它的形状像链条，它的执行过程也非常符合，所以我们都称之为 ** 作用域链 **，而当我们弄懂了这其中的奥秘，就可以抛开这种形式上的束缚，从原理上出发。\n\n# 闭包\n闭包，官方对闭包的解释是：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。\n## 闭包的特点：\n  1. 作为一个函数变量的一个引用，当函数返回时，其处于激活状态。\n  2. 一个闭包就是当一个函数返回时，一个没有释放资源的栈区。\n其实就是 ** 有权访问另一个函数作用域中的变量的函数 **。简单说就是，假设函数a是定义在函数b中的函数，那么函数a就是一个闭包。正常情况下，在函数的外部访问不到函数内部的变量，但有了闭包就可以间接的实现访问内部变量的需要。也就是说，** 闭包是连接函数内部和外部的桥梁 **。\n## 闭包的作用\n  1. 访问函数内部的变量。\n  2. 让被引用的变量值始终保持在内存中。\n\n```js\nfunction fn1(){\n    var a = 1;\n    return function(){\n        console.log(++a);\n    }\n\n}\n\nvar fn2 = fn1();\n\nfn2();        //输出2\n\nfn2();        //输出3\n```\n在这段代码中，fn1中的闭包函数被当作结果返回，在闭包中的引用的变量a因为被引用而没有被清除，一直保存在内存当中，所以执行fn2的时候会输出不断增加的结果：2和3。\n\n当闭包中引用了函数中的变量时，那么，这个变量就会保存在内存中。也就是上面提到的闭包的第二个作用。之所以为这样，是因为JavaScript的回收机制。\n\n基本所有浏览器都是使用“标记清除”的方式回收内存。也就是说，当变量进入执行环境的时候（在函数中声明一个变量），就给变量添加标记，而当函数执行完的，变量不再被引用的时候，再添加删除的标记，垃圾收集器就会自动清楚这个变量占有的内存。但在闭包中引用了函数中的变量，而闭包又被当作结果返回时，闭包中的因为被引用就不会被清除\n\n## 闭包的用途\n1. 匿名自执行函数\n我们知道所有的变量，如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，\n比如：别的函数可能误用这些变量；造成全局对象过于庞大，影响访问速度(因为变量的取值是需要从原型链上遍历的)。\n除了每次使用变量都是用var关键字外，我们在实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，\n比如UI的初始化，那么我们可以使用闭包：\n```js\nvar data= {    \n    table : [],    \n    tree : {}    \n};    \n     \n(function(dm){    \n    for(var i = 0; i < dm.table.rows; i++){    \n        var row = dm.table.rows[i];    \n        for(var j = 0; j < row.cells; i++){    \n            drawCell(i, j);    \n        }    \n    }    \n       \n})(data);\n```\n我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在函数执行完后会立刻释放资源，关键是不污染全局对象。\n\n2. 结果缓存\n我们开发中会碰到很多情况，设想我们有一个处理过程很耗时的函数对象，每次调用都会花费很长时间，\n\n那么我们就需要将计算出来的值存储起来，当调用这个函数的时候，首先在缓存中查找，如果找不到，则进行计算，然后更新缓存并返回值，如果找到了，直接返回查找到的值即可。闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留。\n```js\nvar CachedSearchBox = (function(){    \n    var cache = {},    \n        count = [];    \n    return {    \n        attachSearchBox : function(dsid){    \n            if(dsid in cache){//如果结果在缓存中    \n                return cache[dsid];//直接返回缓存中的对象    \n            }    \n            var fsb = new uikit.webctrl.SearchBox(dsid);//新建    \n            cache[dsid] = fsb;//更新缓存    \n            if(count.length > 100){//保正缓存的大小<=100    \n                delete cache[count.shift()];    \n            }    \n            return fsb;          \n        },    \n     \n        clearSearchBox : function(dsid){    \n            if(dsid in cache){    \n                cache[dsid].clearSelection();      \n            }    \n        }    \n    };    \n})();    \n     \nCachedSearchBox.attachSearchBox(\"input\");\n```\n这样我们在第二次调用的时候，就会从缓存中读取到该对象。\n\n3. 封装\n```js\nvar person = function(){    \n    //变量作用域为函数内部，外部无法访问    \n    var name = \"default\";       \n       \n    return {    \n        getName : function(){    \n            return name;    \n        },    \n        setName : function(newName){    \n            name = newName;    \n        }    \n    }    \n}();    \n     \nprint(person.name);//直接访问，结果为undefined    \nprint(person.getName());    \nperson.setName(\"abruzzi\");    \nprint(person.getName());    \n   \n得到结果如下：  \n   \n// undefined  \n// default  \n// abruzzi\n```\n\n4. 实现类和继承\n```js\nfunction Person(){    \n    var name = \"default\";       \n       \n    return {    \n       getName : function(){    \n           return name;    \n       },    \n       setName : function(newName){    \n           name = newName;    \n       }    \n    }    \n};   \n\nvar p = new Person();\np.setName(\"Tom\");\nalert(p.getName());\n\nvar Jack = function(){};\n//继承自Person\nJack.prototype = new Person();\n//添加私有方法\nJack.prototype.Say = function(){\n    alert(\"Hello,my name is Jack\");\n};\nvar j = new Jack();\nj.setName(\"Jack\");\nj.Say();\nalert(j.getName());\n```\n我们定义了`Person`，它就像一个类，我们`new`一个`Person`对象，访问它的方法。\n\n下面我们定义了`Jack`，继承`Person`，并添加自己的方法。","slug":"js_closure","updated":"2018-07-01T14:06:20.990Z","_id":"cjj2jufh400035uhgiry812ns","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"作用域\"><a href=\"#作用域\" class=\"headerlink\" title=\"作用域\"></a>作用域</h1><p>先来说下什么是作用域，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。他减少了名称冲突，并且提供了自动内存管理。<br>在JavaScript中，变量的作用域有全局作用域和局部作用域两种。</p>\n<h2 id=\"全局作用域\"><a href=\"#全局作用域\" class=\"headerlink\" title=\"全局作用域\"></a>全局作用域</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num1 = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun1</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    num2 = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上三个对象 <code>num1</code>, <code>num2</code> 和 <code>fun1</code> 均是全局作用域，这里要注意的是 <strong> 末定义直接赋值的变量自动声明为拥有全局作用域 </strong>；</p>\n<h2 id=\"局部作用域\"><a href=\"#局部作用域\" class=\"headerlink\" title=\"局部作用域\"></a>局部作用域</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrap</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"string\">\"我被wrap包裹起来了，wrap外部无法直接访问到我\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerFun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//外部无法访问我</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"作用域链\"><a href=\"#作用域链\" class=\"headerlink\" title=\"作用域链\"></a>作用域链</h2><p>当代码在一个环境中执行时，会创建变量对象的一个作用域链。<br>[{当前环境的变量对象}，{外层变量对象}，{外层的外层的变量对象}, {window全局变量对象}] 每个数组单元就是作用域链的一块，这个块就是我们的变量对象。<br>作用于链的前端，始终都是当前执行的代码所在环境的变量对象。全局执行环境的变量对象也始终都是链的最后一个对象。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">12</span>;</span><br><span class=\"line\">    fun(a);</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> b = <span class=\"number\">8</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(a + b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">foo();</span><br></pre></td></tr></table></figure></p>\n<p>再来看上面这个简单的例子，我们可以先思考一下，每个执行环境下的变量对象都是什么？ 这两个函数它们的变量对象分别都是什么？</p>\n<p>我们以fun为例，当我们调用它时，会创建一个包含 <code>arguments</code>，<code>a</code>，<code>b</code>的 <strong> 活动对象 </strong>，对于函数而言，在执行的最开始阶段它的活动对象里只包含一个变量，即<code>arguments</code>(当执行流进入，再创建其他的活动对象)。</p>\n<p>在活动对象中，它依然表示当前参数集合。对于函数的活动对象，我们可以想象成两部分，一个是固定的<code>arguments</code>对象，另一部分是函数中的局部变量。而在此例中，a和b都被算入是局部变量中，即便a已经包含在了<code>arguments中</code>，但他还是属于。</p>\n<p>有没有发现在环境栈中，所有的执行环境都可以组成相对应的作用域链。我们可以在环境栈中非常直观的拼接成一个相对作用域链。</p>\n<p>下面我们大致说下这段代码的执行流程：</p>\n<ol>\n<li>在创建<code>foo</code>的时候，作用域链已经预先包含了一个全局对象，并保存在内部属性<code>[[ Scope ]]</code>当中。</li>\n<li>执行<code>foo</code>函数，创建执行环境与活动对象后，取出函数的内部属性<code>[[Scope]]</code>构建当前环境的作用域链(取出后，只有全局变量对象，然后此时追加了一个它自己的活动对象)。</li>\n<li>执行过程中遇到了<code>fun</code>，从而继续对<code>fun</code>使用上一步的操作。</li>\n<li><code>fun</code>执行结束，移出环境栈。<code>foo</code>因此也执行完毕，继续移出。</li>\n<li>javscript 监听到<code>foo</code>没有被任何变量所引用，开始实施垃圾回收机制，清空占用内存。</li>\n</ol>\n<p>作用域链其实就是引用了当前执行环境的变量对象的指针列表，它只是引用，但不是包含，因为它的形状像链条，它的执行过程也非常符合，所以我们都称之为 <strong> 作用域链 </strong>，而当我们弄懂了这其中的奥秘，就可以抛开这种形式上的束缚，从原理上出发。</p>\n<h1 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h1><p>闭包，官方对闭包的解释是：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。</p>\n<h2 id=\"闭包的特点：\"><a href=\"#闭包的特点：\" class=\"headerlink\" title=\"闭包的特点：\"></a>闭包的特点：</h2><ol>\n<li>作为一个函数变量的一个引用，当函数返回时，其处于激活状态。</li>\n<li>一个闭包就是当一个函数返回时，一个没有释放资源的栈区。<br>其实就是 <strong> 有权访问另一个函数作用域中的变量的函数 </strong>。简单说就是，假设函数a是定义在函数b中的函数，那么函数a就是一个闭包。正常情况下，在函数的外部访问不到函数内部的变量，但有了闭包就可以间接的实现访问内部变量的需要。也就是说，<strong> 闭包是连接函数内部和外部的桥梁 </strong>。<h2 id=\"闭包的作用\"><a href=\"#闭包的作用\" class=\"headerlink\" title=\"闭包的作用\"></a>闭包的作用</h2></li>\n<li>访问函数内部的变量。</li>\n<li>让被引用的变量值始终保持在内存中。</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(++a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn2 = fn1();</span><br><span class=\"line\"></span><br><span class=\"line\">fn2();        <span class=\"comment\">//输出2</span></span><br><span class=\"line\"></span><br><span class=\"line\">fn2();        <span class=\"comment\">//输出3</span></span><br></pre></td></tr></table></figure>\n<p>在这段代码中，fn1中的闭包函数被当作结果返回，在闭包中的引用的变量a因为被引用而没有被清除，一直保存在内存当中，所以执行fn2的时候会输出不断增加的结果：2和3。</p>\n<p>当闭包中引用了函数中的变量时，那么，这个变量就会保存在内存中。也就是上面提到的闭包的第二个作用。之所以为这样，是因为JavaScript的回收机制。</p>\n<p>基本所有浏览器都是使用“标记清除”的方式回收内存。也就是说，当变量进入执行环境的时候（在函数中声明一个变量），就给变量添加标记，而当函数执行完的，变量不再被引用的时候，再添加删除的标记，垃圾收集器就会自动清楚这个变量占有的内存。但在闭包中引用了函数中的变量，而闭包又被当作结果返回时，闭包中的因为被引用就不会被清除</p>\n<h2 id=\"闭包的用途\"><a href=\"#闭包的用途\" class=\"headerlink\" title=\"闭包的用途\"></a>闭包的用途</h2><ol>\n<li>匿名自执行函数<br>我们知道所有的变量，如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，<br>比如：别的函数可能误用这些变量；造成全局对象过于庞大，影响访问速度(因为变量的取值是需要从原型链上遍历的)。<br>除了每次使用变量都是用var关键字外，我们在实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，<br>比如UI的初始化，那么我们可以使用闭包：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data= &#123;    </span><br><span class=\"line\">    table : [],    </span><br><span class=\"line\">    tree : &#123;&#125;    </span><br><span class=\"line\">&#125;;    </span><br><span class=\"line\">     </span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dm</span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dm.table.rows; i++)&#123;    </span><br><span class=\"line\">        <span class=\"keyword\">var</span> row = dm.table.rows[i];    </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; row.cells; i++)&#123;    </span><br><span class=\"line\">            drawCell(i, j);    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">       </span><br><span class=\"line\">&#125;)(data);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在函数执行完后会立刻释放资源，关键是不污染全局对象。</p>\n<ol start=\"2\">\n<li>结果缓存<br>我们开发中会碰到很多情况，设想我们有一个处理过程很耗时的函数对象，每次调用都会花费很长时间，</li>\n</ol>\n<p>那么我们就需要将计算出来的值存储起来，当调用这个函数的时候，首先在缓存中查找，如果找不到，则进行计算，然后更新缓存并返回值，如果找到了，直接返回查找到的值即可。闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> CachedSearchBox = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> cache = &#123;&#125;,    </span><br><span class=\"line\">        count = [];    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">        attachSearchBox : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dsid</span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(dsid <span class=\"keyword\">in</span> cache)&#123;<span class=\"comment\">//如果结果在缓存中    </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> cache[dsid];<span class=\"comment\">//直接返回缓存中的对象    </span></span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">            <span class=\"keyword\">var</span> fsb = <span class=\"keyword\">new</span> uikit.webctrl.SearchBox(dsid);<span class=\"comment\">//新建    </span></span><br><span class=\"line\">            cache[dsid] = fsb;<span class=\"comment\">//更新缓存    </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(count.length &gt; <span class=\"number\">100</span>)&#123;<span class=\"comment\">//保正缓存的大小&lt;=100    </span></span><br><span class=\"line\">                <span class=\"keyword\">delete</span> cache[count.shift()];    </span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">            <span class=\"keyword\">return</span> fsb;          </span><br><span class=\"line\">        &#125;,    </span><br><span class=\"line\">     </span><br><span class=\"line\">        clearSearchBox : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dsid</span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(dsid <span class=\"keyword\">in</span> cache)&#123;    </span><br><span class=\"line\">                cache[dsid].clearSelection();      </span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;;    </span><br><span class=\"line\">&#125;)();    </span><br><span class=\"line\">     </span><br><span class=\"line\">CachedSearchBox.attachSearchBox(<span class=\"string\">\"input\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>这样我们在第二次调用的时候，就会从缓存中读取到该对象。</p>\n<ol start=\"3\">\n<li><p>封装</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"comment\">//变量作用域为函数内部，外部无法访问    </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">\"default\"</span>;       </span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">        getName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">return</span> name;    </span><br><span class=\"line\">        &#125;,    </span><br><span class=\"line\">        setName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newName</span>)</span>&#123;    </span><br><span class=\"line\">            name = newName;    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;();    </span><br><span class=\"line\">     </span><br><span class=\"line\">print(person.name);<span class=\"comment\">//直接访问，结果为undefined    </span></span><br><span class=\"line\">print(person.getName());    </span><br><span class=\"line\">person.setName(<span class=\"string\">\"abruzzi\"</span>);    </span><br><span class=\"line\">print(person.getName());    </span><br><span class=\"line\">   </span><br><span class=\"line\">得到结果如下：  </span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">// undefined  </span></span><br><span class=\"line\"><span class=\"comment\">// default  </span></span><br><span class=\"line\"><span class=\"comment\">// abruzzi</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>实现类和继承</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">\"default\"</span>;       </span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">       getName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">           <span class=\"keyword\">return</span> name;    </span><br><span class=\"line\">       &#125;,    </span><br><span class=\"line\">       setName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newName</span>)</span>&#123;    </span><br><span class=\"line\">           name = newName;    </span><br><span class=\"line\">       &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;;   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">p.setName(<span class=\"string\">\"Tom\"</span>);</span><br><span class=\"line\">alert(p.getName());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> Jack = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">//继承自Person</span></span><br><span class=\"line\">Jack.prototype = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\"><span class=\"comment\">//添加私有方法</span></span><br><span class=\"line\">Jack.prototype.Say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"string\">\"Hello,my name is Jack\"</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> j = <span class=\"keyword\">new</span> Jack();</span><br><span class=\"line\">j.setName(<span class=\"string\">\"Jack\"</span>);</span><br><span class=\"line\">j.Say();</span><br><span class=\"line\">alert(j.getName());</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>我们定义了<code>Person</code>，它就像一个类，我们<code>new</code>一个<code>Person</code>对象，访问它的方法。</p>\n<p>下面我们定义了<code>Jack</code>，继承<code>Person</code>，并添加自己的方法。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"作用域\"><a href=\"#作用域\" class=\"headerlink\" title=\"作用域\"></a>作用域</h1><p>先来说下什么是作用域，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。他减少了名称冲突，并且提供了自动内存管理。<br>在JavaScript中，变量的作用域有全局作用域和局部作用域两种。</p>\n<h2 id=\"全局作用域\"><a href=\"#全局作用域\" class=\"headerlink\" title=\"全局作用域\"></a>全局作用域</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num1 = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun1</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    num2 = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上三个对象 <code>num1</code>, <code>num2</code> 和 <code>fun1</code> 均是全局作用域，这里要注意的是 <strong> 末定义直接赋值的变量自动声明为拥有全局作用域 </strong>；</p>\n<h2 id=\"局部作用域\"><a href=\"#局部作用域\" class=\"headerlink\" title=\"局部作用域\"></a>局部作用域</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">wrap</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"string\">\"我被wrap包裹起来了，wrap外部无法直接访问到我\"</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">innerFun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//外部无法访问我</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"作用域链\"><a href=\"#作用域链\" class=\"headerlink\" title=\"作用域链\"></a>作用域链</h2><p>当代码在一个环境中执行时，会创建变量对象的一个作用域链。<br>[{当前环境的变量对象}，{外层变量对象}，{外层的外层的变量对象}, {window全局变量对象}] 每个数组单元就是作用域链的一块，这个块就是我们的变量对象。<br>作用于链的前端，始终都是当前执行的代码所在环境的变量对象。全局执行环境的变量对象也始终都是链的最后一个对象。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">12</span>;</span><br><span class=\"line\">    fun(a);</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> b = <span class=\"number\">8</span>;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(a + b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">foo();</span><br></pre></td></tr></table></figure></p>\n<p>再来看上面这个简单的例子，我们可以先思考一下，每个执行环境下的变量对象都是什么？ 这两个函数它们的变量对象分别都是什么？</p>\n<p>我们以fun为例，当我们调用它时，会创建一个包含 <code>arguments</code>，<code>a</code>，<code>b</code>的 <strong> 活动对象 </strong>，对于函数而言，在执行的最开始阶段它的活动对象里只包含一个变量，即<code>arguments</code>(当执行流进入，再创建其他的活动对象)。</p>\n<p>在活动对象中，它依然表示当前参数集合。对于函数的活动对象，我们可以想象成两部分，一个是固定的<code>arguments</code>对象，另一部分是函数中的局部变量。而在此例中，a和b都被算入是局部变量中，即便a已经包含在了<code>arguments中</code>，但他还是属于。</p>\n<p>有没有发现在环境栈中，所有的执行环境都可以组成相对应的作用域链。我们可以在环境栈中非常直观的拼接成一个相对作用域链。</p>\n<p>下面我们大致说下这段代码的执行流程：</p>\n<ol>\n<li>在创建<code>foo</code>的时候，作用域链已经预先包含了一个全局对象，并保存在内部属性<code>[[ Scope ]]</code>当中。</li>\n<li>执行<code>foo</code>函数，创建执行环境与活动对象后，取出函数的内部属性<code>[[Scope]]</code>构建当前环境的作用域链(取出后，只有全局变量对象，然后此时追加了一个它自己的活动对象)。</li>\n<li>执行过程中遇到了<code>fun</code>，从而继续对<code>fun</code>使用上一步的操作。</li>\n<li><code>fun</code>执行结束，移出环境栈。<code>foo</code>因此也执行完毕，继续移出。</li>\n<li>javscript 监听到<code>foo</code>没有被任何变量所引用，开始实施垃圾回收机制，清空占用内存。</li>\n</ol>\n<p>作用域链其实就是引用了当前执行环境的变量对象的指针列表，它只是引用，但不是包含，因为它的形状像链条，它的执行过程也非常符合，所以我们都称之为 <strong> 作用域链 </strong>，而当我们弄懂了这其中的奥秘，就可以抛开这种形式上的束缚，从原理上出发。</p>\n<h1 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h1><p>闭包，官方对闭包的解释是：一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。</p>\n<h2 id=\"闭包的特点：\"><a href=\"#闭包的特点：\" class=\"headerlink\" title=\"闭包的特点：\"></a>闭包的特点：</h2><ol>\n<li>作为一个函数变量的一个引用，当函数返回时，其处于激活状态。</li>\n<li>一个闭包就是当一个函数返回时，一个没有释放资源的栈区。<br>其实就是 <strong> 有权访问另一个函数作用域中的变量的函数 </strong>。简单说就是，假设函数a是定义在函数b中的函数，那么函数a就是一个闭包。正常情况下，在函数的外部访问不到函数内部的变量，但有了闭包就可以间接的实现访问内部变量的需要。也就是说，<strong> 闭包是连接函数内部和外部的桥梁 </strong>。<h2 id=\"闭包的作用\"><a href=\"#闭包的作用\" class=\"headerlink\" title=\"闭包的作用\"></a>闭包的作用</h2></li>\n<li>访问函数内部的变量。</li>\n<li>让被引用的变量值始终保持在内存中。</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(++a);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn2 = fn1();</span><br><span class=\"line\"></span><br><span class=\"line\">fn2();        <span class=\"comment\">//输出2</span></span><br><span class=\"line\"></span><br><span class=\"line\">fn2();        <span class=\"comment\">//输出3</span></span><br></pre></td></tr></table></figure>\n<p>在这段代码中，fn1中的闭包函数被当作结果返回，在闭包中的引用的变量a因为被引用而没有被清除，一直保存在内存当中，所以执行fn2的时候会输出不断增加的结果：2和3。</p>\n<p>当闭包中引用了函数中的变量时，那么，这个变量就会保存在内存中。也就是上面提到的闭包的第二个作用。之所以为这样，是因为JavaScript的回收机制。</p>\n<p>基本所有浏览器都是使用“标记清除”的方式回收内存。也就是说，当变量进入执行环境的时候（在函数中声明一个变量），就给变量添加标记，而当函数执行完的，变量不再被引用的时候，再添加删除的标记，垃圾收集器就会自动清楚这个变量占有的内存。但在闭包中引用了函数中的变量，而闭包又被当作结果返回时，闭包中的因为被引用就不会被清除</p>\n<h2 id=\"闭包的用途\"><a href=\"#闭包的用途\" class=\"headerlink\" title=\"闭包的用途\"></a>闭包的用途</h2><ol>\n<li>匿名自执行函数<br>我们知道所有的变量，如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，<br>比如：别的函数可能误用这些变量；造成全局对象过于庞大，影响访问速度(因为变量的取值是需要从原型链上遍历的)。<br>除了每次使用变量都是用var关键字外，我们在实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，<br>比如UI的初始化，那么我们可以使用闭包：<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data= &#123;    </span><br><span class=\"line\">    table : [],    </span><br><span class=\"line\">    tree : &#123;&#125;    </span><br><span class=\"line\">&#125;;    </span><br><span class=\"line\">     </span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dm</span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dm.table.rows; i++)&#123;    </span><br><span class=\"line\">        <span class=\"keyword\">var</span> row = dm.table.rows[i];    </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; row.cells; i++)&#123;    </span><br><span class=\"line\">            drawCell(i, j);    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">       </span><br><span class=\"line\">&#125;)(data);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在函数执行完后会立刻释放资源，关键是不污染全局对象。</p>\n<ol start=\"2\">\n<li>结果缓存<br>我们开发中会碰到很多情况，设想我们有一个处理过程很耗时的函数对象，每次调用都会花费很长时间，</li>\n</ol>\n<p>那么我们就需要将计算出来的值存储起来，当调用这个函数的时候，首先在缓存中查找，如果找不到，则进行计算，然后更新缓存并返回值，如果找到了，直接返回查找到的值即可。闭包正是可以做到这一点，因为它不会释放外部的引用，从而函数内部的值可以得以保留。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> CachedSearchBox = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> cache = &#123;&#125;,    </span><br><span class=\"line\">        count = [];    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">        attachSearchBox : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dsid</span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(dsid <span class=\"keyword\">in</span> cache)&#123;<span class=\"comment\">//如果结果在缓存中    </span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> cache[dsid];<span class=\"comment\">//直接返回缓存中的对象    </span></span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">            <span class=\"keyword\">var</span> fsb = <span class=\"keyword\">new</span> uikit.webctrl.SearchBox(dsid);<span class=\"comment\">//新建    </span></span><br><span class=\"line\">            cache[dsid] = fsb;<span class=\"comment\">//更新缓存    </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(count.length &gt; <span class=\"number\">100</span>)&#123;<span class=\"comment\">//保正缓存的大小&lt;=100    </span></span><br><span class=\"line\">                <span class=\"keyword\">delete</span> cache[count.shift()];    </span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">            <span class=\"keyword\">return</span> fsb;          </span><br><span class=\"line\">        &#125;,    </span><br><span class=\"line\">     </span><br><span class=\"line\">        clearSearchBox : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">dsid</span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(dsid <span class=\"keyword\">in</span> cache)&#123;    </span><br><span class=\"line\">                cache[dsid].clearSelection();      </span><br><span class=\"line\">            &#125;    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;;    </span><br><span class=\"line\">&#125;)();    </span><br><span class=\"line\">     </span><br><span class=\"line\">CachedSearchBox.attachSearchBox(<span class=\"string\">\"input\"</span>);</span><br></pre></td></tr></table></figure></p>\n<p>这样我们在第二次调用的时候，就会从缓存中读取到该对象。</p>\n<ol start=\"3\">\n<li><p>封装</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> person = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"comment\">//变量作用域为函数内部，外部无法访问    </span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">\"default\"</span>;       </span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">        getName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">            <span class=\"keyword\">return</span> name;    </span><br><span class=\"line\">        &#125;,    </span><br><span class=\"line\">        setName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newName</span>)</span>&#123;    </span><br><span class=\"line\">            name = newName;    </span><br><span class=\"line\">        &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;();    </span><br><span class=\"line\">     </span><br><span class=\"line\">print(person.name);<span class=\"comment\">//直接访问，结果为undefined    </span></span><br><span class=\"line\">print(person.getName());    </span><br><span class=\"line\">person.setName(<span class=\"string\">\"abruzzi\"</span>);    </span><br><span class=\"line\">print(person.getName());    </span><br><span class=\"line\">   </span><br><span class=\"line\">得到结果如下：  </span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">// undefined  </span></span><br><span class=\"line\"><span class=\"comment\">// default  </span></span><br><span class=\"line\"><span class=\"comment\">// abruzzi</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>实现类和继承</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">\"default\"</span>;       </span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;    </span><br><span class=\"line\">       getName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;    </span><br><span class=\"line\">           <span class=\"keyword\">return</span> name;    </span><br><span class=\"line\">       &#125;,    </span><br><span class=\"line\">       setName : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newName</span>)</span>&#123;    </span><br><span class=\"line\">           name = newName;    </span><br><span class=\"line\">       &#125;    </span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;;   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\">p.setName(<span class=\"string\">\"Tom\"</span>);</span><br><span class=\"line\">alert(p.getName());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> Jack = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">//继承自Person</span></span><br><span class=\"line\">Jack.prototype = <span class=\"keyword\">new</span> Person();</span><br><span class=\"line\"><span class=\"comment\">//添加私有方法</span></span><br><span class=\"line\">Jack.prototype.Say = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    alert(<span class=\"string\">\"Hello,my name is Jack\"</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> j = <span class=\"keyword\">new</span> Jack();</span><br><span class=\"line\">j.setName(<span class=\"string\">\"Jack\"</span>);</span><br><span class=\"line\">j.Say();</span><br><span class=\"line\">alert(j.getName());</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>我们定义了<code>Person</code>，它就像一个类，我们<code>new</code>一个<code>Person</code>对象，访问它的方法。</p>\n<p>下面我们定义了<code>Jack</code>，继承<code>Person</code>，并添加自己的方法。</p>\n"},{"title":"JavaScript面向对象程序设计","date":"2018-07-02T15:01:02.000Z","published":1,"_content":"# JavaScript面向对象程序设计\n本文会碰到的知识点： \n原型、原型链、函数对象、普通对象、继承\n\n读完本文，可以学到\n* 面向对象的基本概念\n* JavaScript对象属性\n* 理解JavaScript中的函数对象与普通对象\n* 理解prototype和proto\n* 理解原型和原型链\n* 详解原型链相关的Object方法\n* 了解如何用ES5模拟类，以及各种方式的优缺点\n* 了解如何用ES6实现面向对象\n\n## 一、面向对象的基本概念\n面向对象也即是OOP，Object Oriented Programming，是计算机的一种编程架构，OOP的基本原则是计算机是由子程序作用的单个或者多个对象组合而成，包含属性和方法的对象是类的实例，但是JavaScript中没有类的概念，而是直接使用对象来实现编程。 \n特性：\n* 封装：能够将一个实体的信息、功能、响应都封装到一个单独对象中的特性。\n由于JavaScript没有public、private、protected这些关键字，但是可以利用变量的作用域来模拟public和private封装特性\n```js\nvar insObject = (function() {\n    var _name = 'hello'; // private\n    return {\n        getName: function() { // public\n            return _name; \n        }\n    }\n})();\n\n\ninsObject._name; // undefined\ninsObject.getName(); // hello\n```\n这里只是实现了一个简单的版本，private比较好的实现方式可以参考深入理解`ES6 145页`,protected可以利用ES6的Symbol关键字来实现，这里不展开，有兴趣可以讨论\n\n** 继承：在不改变源程序的基础上进行扩充，原功能得以保存，并且对子程序进行扩展，避免重复代码编写，后面的章节详细描述 **\n\n## 二、JavaScript对象属性\n想弄懂面向对象，是不是先看看对象是啥呢？\n我们先看一个题目:\n```js\n[] + {}; // \"[object Object]\"\n{} + []; // 0\n```\n解释： \n在第一行中，`{}`出现在`+`操作符的表达式中，因此被翻译为一个实际的值（一个空`object`）。而`[]`被强制转换为\"\",因此`{}`也会被强制转换为一个`string:\"[object Object]\"`。 \n但在第二行中，`{}`被翻译为一个独立的`{}`空代码块儿（它什么也不做）。块儿不需要分号来终结它们，所以这里缺少分号不是一个问题。最终，`+ []`是一个将`[]`明确强制转换 为`number`的表达式，而它的值是`0`。\n### 2.1 属性\n*对象的属性*\n* Object.prototype Object 的原型对象，不是每个对象都有prototype属性\n* Object.prototype.proto 不是标准方法，不鼓励使用，每个对象都有proto属性，但是由于浏览器实现方式的不同，proto属性在chrome、firefox中实现了，在IE中并不支持，替代的方法是Object.getPrototypeOf()\n* Object.prototype.constructor：用于创建一个对象的原型，创建对象的构造函数\n可能大家会有一个疑问，为什么上面那些属性要加上prototype \n在chrome中打印一下`var a = { test: 'test' }`\n\n*属性描述符*\n数据属性：\n\n| 特性名称 | 描述 | 默认值 |\n| - | - | - |\n| value | 属性的值 | undfined |\n| writable | 是否可以修改属性的值，true表示可以，false表示不可以 | true |\n| enumerable | 属性值是否可枚举，true表示可枚举for-in, false表示不可枚举 | true |\n| configurable | 属性的特性是否可配置，表示能否通过delete删除属性后重新定义属性 | true |\n例子: \n![](http://sml-myoss.oss-cn-beijing.aliyuncs.com/blog/word_img/20180702231814.png?Expires=1530554407&OSSAccessKeyId=TMP.AQHCd1RMWKjA3RAtZLXmhwWVVeiO5oPvxvXPy7zV9-LMDVLVHCa8kWsTdlk3ADAtAhUAsW-H-UT_inX-jf4Xzb0JhlOCOxQCFBpYwOGJlUIrSpjXzwC7qvaP1jIY&Signature=kyNGDVSXItIbqXY9FKkdnrCnKrs%3D)\n\n访问器属性：\n\n| 特性名称 | 描述 | 默认值 |\n| - | - | - |\n| set | 设置属性时调用的函数 | undefined |\n| get | 写入属性时调用的函数 | undefined |\n| configurable | 表示能否通过delete删除属性后重新定义属性 | true |\n| enumerable | 表示能否通过for-in循环返回属性 | true |\n\n访问器属性不能直接定义，一般是通过`Object.defineProperty()`方法来定义，但是这个方法只支持IE9+， 以前一般用两个非标准方法来实现`__defineGetter__()`和֖`__defineSetter__() `\n例子：\n```js\nvar book = { _year: 2004, edition: 1 };\n\n\nObject.defineProperty(book, \"year\", { \n    get: function(){ \n        return this._year; \n    }, \n    set: function(newValue){\n        if (newValue > 2004){ \n            this._year = newValue; \n            this.edition += newValue - 2004; \n        }\n    }\n});\n\n\nbook.year = 2005; \nalert(book.edition);\n```\n\n### 2.2 方法\n* Object.prototype.toString() 返回对象的字符串表示\n* Object.prototype.hasOwnProperty() 返回一个布尔值，表示某个对象是否含有指定的属性，而且此属性非原型链继承，也就是说不会检查原型链上的属性\n* Object.prototype.isPrototypeOf() 返回一个布尔值，表示指定的对象是否在本对象的原型链中\n* Object.prototype.propertyIsEnumerable() 判断指定属性是否可枚举\n* Object.prototype.watch() 给对象的某个属性增加监听\n* Object.prototype.unwatch() 移除对象某个属性的监听\n* Object.prototype.valueOf() 返回指定对象的原始值\n* 获取和设置属性 \n    * Object.defineProperty 定义单个属性\n    * Object.defineProperties 定义多个属性\n    * Object.getOwnPropertyDescriptor 获取属性\n* Object.assign() 拷贝可枚举属性 （ES6新增）\n* Object.create() 创建对象\n* Object.entries() 返回一个包含由给定对象所有可枚举属性的属性名和属性值组成的 [属性名，属性值] 键值对的数组，数组中键值对的排列顺序和使用for…in循环遍历该对象时返回的顺序一致\n* Object.freeze() 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象\n* Object.getOwnPropertyNames() 返回指定对象的属性名组成的数组\n* Object.getPrototypeOf 返回该对象的原型\n* Object.is(value1, value2) 判断两个值是否是同一个值 (ES6 新增)\n* Object.keys() 返回一个由给定对象的所有可枚举自身属性的属性名组成的数组，数组中属性名的排列顺序和使用for-in循环遍历该对象时返回的顺序一致\n* Object.setPrototypeOf(obj, prototype) 将一个指定的对象的原型设置为另一个对象或者null\n* Object.values 返回一个包含指定对象所有的可枚举属性值的数组，数组中的值顺序和使用for…in循环遍历的顺序一样\n\n### 2.3 应用\n如何检测某个属性是否在对象中？\n* in运算符，判断对象是否包含某个属性，会从对象的实例属性、继承属性里进行检测\n```js\nfunction Dogs(name) {\n    this.name = name\n}\n\nfunction BigDogs(size) {\n    this.size = size;\n}\n\nBigDogs.prototype = new Dogs();\n\nvar a = new BigDogs('big');\n\n'size' in a;\n'name' in a;\n'age' in a;\n```\n* Object.hasOwnProperty()，判断一个对象是否有指定名称的属性，不会检查继承属性\n```js\na.hasOwnProperty('size');\na.hasOwnProperty('name');\na.hasOwnProperty('age');\n```\n* Object.propertyIsEnumerable()，判断指定名称的属性是否为实例属性并且是可枚举的\n```js\n// es6\nvar a = Object.create({}, {\n    name: {\n        value: 'hello',\n        enumerable: true,\n    },\n    age: {\n        value: 11,\n        enumerable: false,\n    }\n});\n\n// es5\nvar b = {};\nObject.defineProperties(b, {\n    name: {\n        value: 'hello',\n        enumerable: true,\n    },\n    age: {\n        value: 11,\n        enumerable: false,\n    } \n});\n\na.propertyIsEnumerable('name');\na.propertyIsEnumerable('age');\n```\n* 如何枚举对象的属性，并保证不同了浏览器中的行为是一致的？\n`for/in` 语句，可以遍历可枚举的实例属性和继承属性\n```js\nvar a = {\n  supername: 'super hello',\n  superage: 'super name',\n}\nvar b = {};\nObject.defineProperties(b, {\n  name: {\n      value: 'hello',\n      enumerable: true,\n  },\n  age: {\n      value: 11,\n      enumerable: false,\n  } \n});\n\nObject.setPrototypeOf(b, a); // 设置b的原型是a 等效的是b.__proto__ = a\n\nfor(pro in b) {\n  console.log(pro); // name, supername, superage\n}\n```\n\n* Object.keys()， 返回一个数组，内容是对象可枚举的实例属性名称\n```js\nvar propertyArray = Object.keys(b);\n // name\n```\n\n* Object.getOwnPropertyNames()，返回一个数组，内容是对象所有实例属性，包括可枚举和不可枚举\n```js\nvar propertyArray = Object.getOwnPropertyNames(b);\n // name, age\n```\n\n* 如何判断两个对象是否相等？\n我只想说，这个问题说简单很简单，说复杂也挺复杂的[传送门](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript) \n我们看个简单版的\n```js\nfunction isEquivalent(a, b) {\n    var aProps = Object.getOwnPropertyNames(a);\n    var bProps = Object.getOwnPropertyNames(b);\n    if (aProps.length != bProps.length){\n        return false;\n    }\n\n\n    for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n        if (a[propName] !== b[propName]) {\n            return false;\n        }\n    }\n    return true;\n}\n\n\n// Outputs: true\nconsole.log(isEquivalent({a:1},{a:1}));\n```\n上面这个函数还有啥问题呢\n    * 没有对传入参数进行校验，例如判断是否是NaN，或者是其他内置属性\n    * 没有判断传入对象的construct和prototype\n    * 时间算法复杂度是O(n2)\n有同学可能会有疑问，能不能用`Object.is`，答案是否定的，`Object.is`简单来说就是在`===`的基础上特别处理了`NaN`，`+0`，`-0`，保证了`-0`和`+0`不相同，`Object.is(NaN, NaN)`返回`true`。\n* 对象的深拷贝和浅拷贝 \n其实如果大家理解了上面的那些方法，是很容易写出深拷贝和浅拷贝的代码的，我们先看一下这两者的却别。 \n浅拷贝仅仅是复制引用，拷贝后a === b， 注意Object.assign方法实现的是浅复制（此处有深刻教训！！！） \n深拷贝这是创建了一个新的对象，然后把旧的对象中的属性和方法拷贝到新的对象中，拷贝后 a !== b \n深拷贝的实现由很多例子，例如jQuery的extend和lodash中的cloneDeep, clone。jQuery可以使用$.extend(true, {}, ...)来实现深拷贝, 但是jQuery无法复制JSON对象之外的对象，例如ES6引入的Map、Set等。而lodash加入的大量的代码来实现ES6新引入的标准对象 \n\n## 三、对象分为函数对象和普通对象\n** 什么是函数对象和普通对象？**\nObject、Function、Array、Date等js的内置对象都是函数对象\n```js\nfunction a1 () {}\nconst a2 = function () {}\nconst a3 = new Function();\n\nconst b1 = {};\nconst b2 = new Object();\n\nconst c1 = [];\nconst c2 = new Array();\n\nconst d1 = new a1();\nconst d2 = new b1(); // ????\nconst d3 = new c1(); // ????\n\ntypeof a1;\ntypeof a2;\ntypeof a3;\n\ntypeof b1;\ntypeof b2;\n\ntypeof c1;\ntypeof c2;\n\ntypeof d1;\n```\n上面两行报错的原因，是因为构造函数只能由函数来充当，而b1和c1不是Function的实例，所以不能充当构造器\n** 但是只有Function的实例都是函数对象、其他的实例都是普通对象 **\n我们延伸一下，在看个例子\n```js\nconst e1 = function *(){};\nconst e2 = new e1();\n// Uncaught TypeError: e1 is not a constructor\nconsole.log(e1.constructor) // 是有值的。。。\n// 规范里面就不能new\nconst e2 = e1();\n```\n`GeneratorFunction`是一个特殊的函数对象 \n`e1.__proto__.__proto__ === Function.prototype`\n\n`e1`的原型实际上是一个生成器函数`GeneratorFunction`，也就是说 \n`e1.__proto__ === GeneratorFunction.prototype`\n\n这行代码有问题么，啊哈哈哈，`GeneratorFunction`这个关键字主流的JavaScript还木有暴露出来，所以这个大家理解就好啦\n\n虽然不能直接`new e1`\n但是可以`new e1.constructor();`哈哈哈哈\n\n## 四、理解prototype和proto\n| 对象类型 | prototype | proto |\n| - | - |\n| 函数对象 | Yes | Yes |\n| 普通对象 | No | Yes |\n\n* 只有函数对象具有`prototype`这个属性\n* `prototype`和`__proto__`都是js在定义一个对象时的预定义属性\n* `prototype`是被实例的`__proto__`指向\n* `__proto__`指向构造函数的`prototype`\n```js\nconst a = function(){}\nconst b = {}\n\ntypeof a // function\ntypeof b // object\n\ntypeof a.prototype // object\ntypeof a.__proto__ // function\n\ntypeof b.prototype // undefined\ntypeof b.__proto__ // object\n\na.__proto__ === Function.prototype\nb.__proto__ === Object.prototype\n```\n理解了`prototype`和`__proto__`之后，我们来看看之前一直说的为什么JavaScript里面都是对象\n```js\nconst a = {}\nconst b = function () {}\nconst c = []\nconst d = new Date()\n\na.__proto__\na.__proto__ === Object.prototype\n\nb.__proto__\nb.__proto__ === Function.prototype\n\nc.__proto__\nc.__proto__ === Array.prototype\n\nd.__proto__\nd.__proto__ === Date.prototype\n\nObject.prototype.__proto__ //null\n\nFunction.prototype.__proto__ === Object.prototype\n\nArray.prototype.__proto__ === Object.prototype\n\nDate.prototype.__proto__ === Object.prototype\n```\n延伸一个问题：如何判断一个变量是否是数组？\n* typeof\n我们上面已经解释了，这些都是普通对象，普通对象是没有`prototype`的，他们`typeof`的值都是`object`\n```js\ntypeof []\ntypeof {}\n```\n从原型来看, 原理就是看Array是否在a的原型链中\na的原型链是 Array->Object\n```js\nconst a = [];\nArray.prototype.isPrototypeOf(obj);\n```\n* instanceof\n```js\nconst a = [];\na instanceof Array\n```\n从构造函数入手，但是这个方法和上面的方法都有一问题，不同的框架中创建的数组不会相互共享其`prototype`属性\n根据对象的class属性，跨原型调用`tostring`方法\n```js\nconst a = [];\nObject.prototype.toString.call(a);\n// [Object Array]\n```\nES5 中所有内置对象的[[Class]]属性的值是由规范定义的，但是 ES6 中已经没有了[[Class]]属性，取代它的是[[NativeBrand]]属性，这个大家有兴趣可以自行去查看规范 \n原理： \n1. 如果`this`的值为`undefined`,则返回`'[object Undefined]'`. \n2. 如果`this`的值为`null`,则返回`[object Null]`. \n3. 让`O`成为调用`ToObject(this)`的结果. \n4. 让`class`成为`O`的内部属性`[[Class]]`的值. \n5. 返回三个字符串`'[object '`, `'class'`, 以及 `']'`连接后的新字符串.\n\n问题？这个一定是正确的么？不正确为啥？ \n提示ES6的`Symbol`属性\n`Array.isArray()` \n部分浏览器中不兼容\n\n## 五、理解原型与原型链\n其实上一节中的`prototype`和`proto`就是为了构建原型链而存在的，之前也或多或少的说到了原型链这个概念。\n\n看下面的代码:\n```js\nconst Dogs = function(name) {\n    this.name = name;\n}\n\nDogs.prototype.getName = function() {\n    return this.name\n}\n\nconst sijing = new Dogs('sijing');\nconsole.log(sijing);\nconsole.log(sijing.getName());\n```\n这段代码的执行过程 \n1. 首先创建了一个构造函数`Dogs`，传入一个参数`name`，`Dogs.prototype`也会自动创建 \n2. 给对象`dogs`增加了一个方法 \n3. 通过构造函数`Dogs`实例化了一个对象`sijing`\n4. 输出`sijing`的值\n    可以看到`sijing`有两个值`name`和`proto`,其中`proto`指向`Dogs.prototype` \n5. 执行`getName`方法时，在`sijing`中找不到这个方法，就会继续向着原型链继续往上找，也就是通过`proto`，然后就找到了`getName`方法。\n\n这个过程实际上就是原型继承，实际上JavaScript的原型继承就是利用了`proto`并借助`prototype`来实现的。\n```js\nsijing.__proto__ === Function.prototype\n\nDogs.prototype // 指向什么\nDogs.prototype.__proto__ // 指向什么\nDogs.prototype.__proto__.__proto__ // 指向什么\n```\n上面例子中`getName`最终是查找到了，那么如果在原型链中一直没查找到，会怎么样？ \n例如`console.log(sijing.age)`\n```js\nsijing // 是一个对象可以继续\nsijing.age // 不存在，继续\nsijing.__proto__ // 是一个对象可以继续\nsijing.__proto__.age // 不存在，继续\nsijing.__proto__.__proto__ // 是个对象可以继续\nsijing.__proto__.__proto__.age // 不存在，继续\nsijing.__proto__.__proto__.__proto__ null，// 不是对象，到头啦\n```\n** 原型链 ** 的概念其实不重要，重要的是要理解，简单来说，原型链就是利用原型让一个引用类型继承另一个应用类型的属性和方法。\n\n还有三点需要注意的:\n* 任何内置函数对象（类）本身的 `_proto_`都指向`Function`的原型对象；\n* 除了`Object`的原型对象的`_proto_`指向`null`，其他所有内置函数对象的原型对象的`_proto_`都指向`object`。\n* 所有构造函数的的`prototype`方法的`proto`都指向`Object.prototype`（除了….`Object.prototype`自身）\n\n如果理解了上面这些内容，大家可以自行描述一下，构造函数、原型和实例之间的关系.\n* 构造函数首字母必须大写，用来区分普通函数，内部使用`this`指针，指向要生成的实例对象，通过`new`来生成实例对象。 \n* 实例就是通过`new`一个构造函数产生的对象，它有一个属性`[[prototype]]`指向原型 \n* 原型中有一个属性`[[constructor]]`，指向构造函数","source":"_posts/oop_extend.md","raw":"---\ntitle: JavaScript面向对象程序设计\ndate: 2018-07-02 23:01:02\ntags: [ 面向对象, 继承 ]\ncategories: [ JS ]\npublished: true\n---\n# JavaScript面向对象程序设计\n本文会碰到的知识点： \n原型、原型链、函数对象、普通对象、继承\n\n读完本文，可以学到\n* 面向对象的基本概念\n* JavaScript对象属性\n* 理解JavaScript中的函数对象与普通对象\n* 理解prototype和proto\n* 理解原型和原型链\n* 详解原型链相关的Object方法\n* 了解如何用ES5模拟类，以及各种方式的优缺点\n* 了解如何用ES6实现面向对象\n\n## 一、面向对象的基本概念\n面向对象也即是OOP，Object Oriented Programming，是计算机的一种编程架构，OOP的基本原则是计算机是由子程序作用的单个或者多个对象组合而成，包含属性和方法的对象是类的实例，但是JavaScript中没有类的概念，而是直接使用对象来实现编程。 \n特性：\n* 封装：能够将一个实体的信息、功能、响应都封装到一个单独对象中的特性。\n由于JavaScript没有public、private、protected这些关键字，但是可以利用变量的作用域来模拟public和private封装特性\n```js\nvar insObject = (function() {\n    var _name = 'hello'; // private\n    return {\n        getName: function() { // public\n            return _name; \n        }\n    }\n})();\n\n\ninsObject._name; // undefined\ninsObject.getName(); // hello\n```\n这里只是实现了一个简单的版本，private比较好的实现方式可以参考深入理解`ES6 145页`,protected可以利用ES6的Symbol关键字来实现，这里不展开，有兴趣可以讨论\n\n** 继承：在不改变源程序的基础上进行扩充，原功能得以保存，并且对子程序进行扩展，避免重复代码编写，后面的章节详细描述 **\n\n## 二、JavaScript对象属性\n想弄懂面向对象，是不是先看看对象是啥呢？\n我们先看一个题目:\n```js\n[] + {}; // \"[object Object]\"\n{} + []; // 0\n```\n解释： \n在第一行中，`{}`出现在`+`操作符的表达式中，因此被翻译为一个实际的值（一个空`object`）。而`[]`被强制转换为\"\",因此`{}`也会被强制转换为一个`string:\"[object Object]\"`。 \n但在第二行中，`{}`被翻译为一个独立的`{}`空代码块儿（它什么也不做）。块儿不需要分号来终结它们，所以这里缺少分号不是一个问题。最终，`+ []`是一个将`[]`明确强制转换 为`number`的表达式，而它的值是`0`。\n### 2.1 属性\n*对象的属性*\n* Object.prototype Object 的原型对象，不是每个对象都有prototype属性\n* Object.prototype.proto 不是标准方法，不鼓励使用，每个对象都有proto属性，但是由于浏览器实现方式的不同，proto属性在chrome、firefox中实现了，在IE中并不支持，替代的方法是Object.getPrototypeOf()\n* Object.prototype.constructor：用于创建一个对象的原型，创建对象的构造函数\n可能大家会有一个疑问，为什么上面那些属性要加上prototype \n在chrome中打印一下`var a = { test: 'test' }`\n\n*属性描述符*\n数据属性：\n\n| 特性名称 | 描述 | 默认值 |\n| - | - | - |\n| value | 属性的值 | undfined |\n| writable | 是否可以修改属性的值，true表示可以，false表示不可以 | true |\n| enumerable | 属性值是否可枚举，true表示可枚举for-in, false表示不可枚举 | true |\n| configurable | 属性的特性是否可配置，表示能否通过delete删除属性后重新定义属性 | true |\n例子: \n![](http://sml-myoss.oss-cn-beijing.aliyuncs.com/blog/word_img/20180702231814.png?Expires=1530554407&OSSAccessKeyId=TMP.AQHCd1RMWKjA3RAtZLXmhwWVVeiO5oPvxvXPy7zV9-LMDVLVHCa8kWsTdlk3ADAtAhUAsW-H-UT_inX-jf4Xzb0JhlOCOxQCFBpYwOGJlUIrSpjXzwC7qvaP1jIY&Signature=kyNGDVSXItIbqXY9FKkdnrCnKrs%3D)\n\n访问器属性：\n\n| 特性名称 | 描述 | 默认值 |\n| - | - | - |\n| set | 设置属性时调用的函数 | undefined |\n| get | 写入属性时调用的函数 | undefined |\n| configurable | 表示能否通过delete删除属性后重新定义属性 | true |\n| enumerable | 表示能否通过for-in循环返回属性 | true |\n\n访问器属性不能直接定义，一般是通过`Object.defineProperty()`方法来定义，但是这个方法只支持IE9+， 以前一般用两个非标准方法来实现`__defineGetter__()`和֖`__defineSetter__() `\n例子：\n```js\nvar book = { _year: 2004, edition: 1 };\n\n\nObject.defineProperty(book, \"year\", { \n    get: function(){ \n        return this._year; \n    }, \n    set: function(newValue){\n        if (newValue > 2004){ \n            this._year = newValue; \n            this.edition += newValue - 2004; \n        }\n    }\n});\n\n\nbook.year = 2005; \nalert(book.edition);\n```\n\n### 2.2 方法\n* Object.prototype.toString() 返回对象的字符串表示\n* Object.prototype.hasOwnProperty() 返回一个布尔值，表示某个对象是否含有指定的属性，而且此属性非原型链继承，也就是说不会检查原型链上的属性\n* Object.prototype.isPrototypeOf() 返回一个布尔值，表示指定的对象是否在本对象的原型链中\n* Object.prototype.propertyIsEnumerable() 判断指定属性是否可枚举\n* Object.prototype.watch() 给对象的某个属性增加监听\n* Object.prototype.unwatch() 移除对象某个属性的监听\n* Object.prototype.valueOf() 返回指定对象的原始值\n* 获取和设置属性 \n    * Object.defineProperty 定义单个属性\n    * Object.defineProperties 定义多个属性\n    * Object.getOwnPropertyDescriptor 获取属性\n* Object.assign() 拷贝可枚举属性 （ES6新增）\n* Object.create() 创建对象\n* Object.entries() 返回一个包含由给定对象所有可枚举属性的属性名和属性值组成的 [属性名，属性值] 键值对的数组，数组中键值对的排列顺序和使用for…in循环遍历该对象时返回的顺序一致\n* Object.freeze() 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象\n* Object.getOwnPropertyNames() 返回指定对象的属性名组成的数组\n* Object.getPrototypeOf 返回该对象的原型\n* Object.is(value1, value2) 判断两个值是否是同一个值 (ES6 新增)\n* Object.keys() 返回一个由给定对象的所有可枚举自身属性的属性名组成的数组，数组中属性名的排列顺序和使用for-in循环遍历该对象时返回的顺序一致\n* Object.setPrototypeOf(obj, prototype) 将一个指定的对象的原型设置为另一个对象或者null\n* Object.values 返回一个包含指定对象所有的可枚举属性值的数组，数组中的值顺序和使用for…in循环遍历的顺序一样\n\n### 2.3 应用\n如何检测某个属性是否在对象中？\n* in运算符，判断对象是否包含某个属性，会从对象的实例属性、继承属性里进行检测\n```js\nfunction Dogs(name) {\n    this.name = name\n}\n\nfunction BigDogs(size) {\n    this.size = size;\n}\n\nBigDogs.prototype = new Dogs();\n\nvar a = new BigDogs('big');\n\n'size' in a;\n'name' in a;\n'age' in a;\n```\n* Object.hasOwnProperty()，判断一个对象是否有指定名称的属性，不会检查继承属性\n```js\na.hasOwnProperty('size');\na.hasOwnProperty('name');\na.hasOwnProperty('age');\n```\n* Object.propertyIsEnumerable()，判断指定名称的属性是否为实例属性并且是可枚举的\n```js\n// es6\nvar a = Object.create({}, {\n    name: {\n        value: 'hello',\n        enumerable: true,\n    },\n    age: {\n        value: 11,\n        enumerable: false,\n    }\n});\n\n// es5\nvar b = {};\nObject.defineProperties(b, {\n    name: {\n        value: 'hello',\n        enumerable: true,\n    },\n    age: {\n        value: 11,\n        enumerable: false,\n    } \n});\n\na.propertyIsEnumerable('name');\na.propertyIsEnumerable('age');\n```\n* 如何枚举对象的属性，并保证不同了浏览器中的行为是一致的？\n`for/in` 语句，可以遍历可枚举的实例属性和继承属性\n```js\nvar a = {\n  supername: 'super hello',\n  superage: 'super name',\n}\nvar b = {};\nObject.defineProperties(b, {\n  name: {\n      value: 'hello',\n      enumerable: true,\n  },\n  age: {\n      value: 11,\n      enumerable: false,\n  } \n});\n\nObject.setPrototypeOf(b, a); // 设置b的原型是a 等效的是b.__proto__ = a\n\nfor(pro in b) {\n  console.log(pro); // name, supername, superage\n}\n```\n\n* Object.keys()， 返回一个数组，内容是对象可枚举的实例属性名称\n```js\nvar propertyArray = Object.keys(b);\n // name\n```\n\n* Object.getOwnPropertyNames()，返回一个数组，内容是对象所有实例属性，包括可枚举和不可枚举\n```js\nvar propertyArray = Object.getOwnPropertyNames(b);\n // name, age\n```\n\n* 如何判断两个对象是否相等？\n我只想说，这个问题说简单很简单，说复杂也挺复杂的[传送门](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript) \n我们看个简单版的\n```js\nfunction isEquivalent(a, b) {\n    var aProps = Object.getOwnPropertyNames(a);\n    var bProps = Object.getOwnPropertyNames(b);\n    if (aProps.length != bProps.length){\n        return false;\n    }\n\n\n    for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n        if (a[propName] !== b[propName]) {\n            return false;\n        }\n    }\n    return true;\n}\n\n\n// Outputs: true\nconsole.log(isEquivalent({a:1},{a:1}));\n```\n上面这个函数还有啥问题呢\n    * 没有对传入参数进行校验，例如判断是否是NaN，或者是其他内置属性\n    * 没有判断传入对象的construct和prototype\n    * 时间算法复杂度是O(n2)\n有同学可能会有疑问，能不能用`Object.is`，答案是否定的，`Object.is`简单来说就是在`===`的基础上特别处理了`NaN`，`+0`，`-0`，保证了`-0`和`+0`不相同，`Object.is(NaN, NaN)`返回`true`。\n* 对象的深拷贝和浅拷贝 \n其实如果大家理解了上面的那些方法，是很容易写出深拷贝和浅拷贝的代码的，我们先看一下这两者的却别。 \n浅拷贝仅仅是复制引用，拷贝后a === b， 注意Object.assign方法实现的是浅复制（此处有深刻教训！！！） \n深拷贝这是创建了一个新的对象，然后把旧的对象中的属性和方法拷贝到新的对象中，拷贝后 a !== b \n深拷贝的实现由很多例子，例如jQuery的extend和lodash中的cloneDeep, clone。jQuery可以使用$.extend(true, {}, ...)来实现深拷贝, 但是jQuery无法复制JSON对象之外的对象，例如ES6引入的Map、Set等。而lodash加入的大量的代码来实现ES6新引入的标准对象 \n\n## 三、对象分为函数对象和普通对象\n** 什么是函数对象和普通对象？**\nObject、Function、Array、Date等js的内置对象都是函数对象\n```js\nfunction a1 () {}\nconst a2 = function () {}\nconst a3 = new Function();\n\nconst b1 = {};\nconst b2 = new Object();\n\nconst c1 = [];\nconst c2 = new Array();\n\nconst d1 = new a1();\nconst d2 = new b1(); // ????\nconst d3 = new c1(); // ????\n\ntypeof a1;\ntypeof a2;\ntypeof a3;\n\ntypeof b1;\ntypeof b2;\n\ntypeof c1;\ntypeof c2;\n\ntypeof d1;\n```\n上面两行报错的原因，是因为构造函数只能由函数来充当，而b1和c1不是Function的实例，所以不能充当构造器\n** 但是只有Function的实例都是函数对象、其他的实例都是普通对象 **\n我们延伸一下，在看个例子\n```js\nconst e1 = function *(){};\nconst e2 = new e1();\n// Uncaught TypeError: e1 is not a constructor\nconsole.log(e1.constructor) // 是有值的。。。\n// 规范里面就不能new\nconst e2 = e1();\n```\n`GeneratorFunction`是一个特殊的函数对象 \n`e1.__proto__.__proto__ === Function.prototype`\n\n`e1`的原型实际上是一个生成器函数`GeneratorFunction`，也就是说 \n`e1.__proto__ === GeneratorFunction.prototype`\n\n这行代码有问题么，啊哈哈哈，`GeneratorFunction`这个关键字主流的JavaScript还木有暴露出来，所以这个大家理解就好啦\n\n虽然不能直接`new e1`\n但是可以`new e1.constructor();`哈哈哈哈\n\n## 四、理解prototype和proto\n| 对象类型 | prototype | proto |\n| - | - |\n| 函数对象 | Yes | Yes |\n| 普通对象 | No | Yes |\n\n* 只有函数对象具有`prototype`这个属性\n* `prototype`和`__proto__`都是js在定义一个对象时的预定义属性\n* `prototype`是被实例的`__proto__`指向\n* `__proto__`指向构造函数的`prototype`\n```js\nconst a = function(){}\nconst b = {}\n\ntypeof a // function\ntypeof b // object\n\ntypeof a.prototype // object\ntypeof a.__proto__ // function\n\ntypeof b.prototype // undefined\ntypeof b.__proto__ // object\n\na.__proto__ === Function.prototype\nb.__proto__ === Object.prototype\n```\n理解了`prototype`和`__proto__`之后，我们来看看之前一直说的为什么JavaScript里面都是对象\n```js\nconst a = {}\nconst b = function () {}\nconst c = []\nconst d = new Date()\n\na.__proto__\na.__proto__ === Object.prototype\n\nb.__proto__\nb.__proto__ === Function.prototype\n\nc.__proto__\nc.__proto__ === Array.prototype\n\nd.__proto__\nd.__proto__ === Date.prototype\n\nObject.prototype.__proto__ //null\n\nFunction.prototype.__proto__ === Object.prototype\n\nArray.prototype.__proto__ === Object.prototype\n\nDate.prototype.__proto__ === Object.prototype\n```\n延伸一个问题：如何判断一个变量是否是数组？\n* typeof\n我们上面已经解释了，这些都是普通对象，普通对象是没有`prototype`的，他们`typeof`的值都是`object`\n```js\ntypeof []\ntypeof {}\n```\n从原型来看, 原理就是看Array是否在a的原型链中\na的原型链是 Array->Object\n```js\nconst a = [];\nArray.prototype.isPrototypeOf(obj);\n```\n* instanceof\n```js\nconst a = [];\na instanceof Array\n```\n从构造函数入手，但是这个方法和上面的方法都有一问题，不同的框架中创建的数组不会相互共享其`prototype`属性\n根据对象的class属性，跨原型调用`tostring`方法\n```js\nconst a = [];\nObject.prototype.toString.call(a);\n// [Object Array]\n```\nES5 中所有内置对象的[[Class]]属性的值是由规范定义的，但是 ES6 中已经没有了[[Class]]属性，取代它的是[[NativeBrand]]属性，这个大家有兴趣可以自行去查看规范 \n原理： \n1. 如果`this`的值为`undefined`,则返回`'[object Undefined]'`. \n2. 如果`this`的值为`null`,则返回`[object Null]`. \n3. 让`O`成为调用`ToObject(this)`的结果. \n4. 让`class`成为`O`的内部属性`[[Class]]`的值. \n5. 返回三个字符串`'[object '`, `'class'`, 以及 `']'`连接后的新字符串.\n\n问题？这个一定是正确的么？不正确为啥？ \n提示ES6的`Symbol`属性\n`Array.isArray()` \n部分浏览器中不兼容\n\n## 五、理解原型与原型链\n其实上一节中的`prototype`和`proto`就是为了构建原型链而存在的，之前也或多或少的说到了原型链这个概念。\n\n看下面的代码:\n```js\nconst Dogs = function(name) {\n    this.name = name;\n}\n\nDogs.prototype.getName = function() {\n    return this.name\n}\n\nconst sijing = new Dogs('sijing');\nconsole.log(sijing);\nconsole.log(sijing.getName());\n```\n这段代码的执行过程 \n1. 首先创建了一个构造函数`Dogs`，传入一个参数`name`，`Dogs.prototype`也会自动创建 \n2. 给对象`dogs`增加了一个方法 \n3. 通过构造函数`Dogs`实例化了一个对象`sijing`\n4. 输出`sijing`的值\n    可以看到`sijing`有两个值`name`和`proto`,其中`proto`指向`Dogs.prototype` \n5. 执行`getName`方法时，在`sijing`中找不到这个方法，就会继续向着原型链继续往上找，也就是通过`proto`，然后就找到了`getName`方法。\n\n这个过程实际上就是原型继承，实际上JavaScript的原型继承就是利用了`proto`并借助`prototype`来实现的。\n```js\nsijing.__proto__ === Function.prototype\n\nDogs.prototype // 指向什么\nDogs.prototype.__proto__ // 指向什么\nDogs.prototype.__proto__.__proto__ // 指向什么\n```\n上面例子中`getName`最终是查找到了，那么如果在原型链中一直没查找到，会怎么样？ \n例如`console.log(sijing.age)`\n```js\nsijing // 是一个对象可以继续\nsijing.age // 不存在，继续\nsijing.__proto__ // 是一个对象可以继续\nsijing.__proto__.age // 不存在，继续\nsijing.__proto__.__proto__ // 是个对象可以继续\nsijing.__proto__.__proto__.age // 不存在，继续\nsijing.__proto__.__proto__.__proto__ null，// 不是对象，到头啦\n```\n** 原型链 ** 的概念其实不重要，重要的是要理解，简单来说，原型链就是利用原型让一个引用类型继承另一个应用类型的属性和方法。\n\n还有三点需要注意的:\n* 任何内置函数对象（类）本身的 `_proto_`都指向`Function`的原型对象；\n* 除了`Object`的原型对象的`_proto_`指向`null`，其他所有内置函数对象的原型对象的`_proto_`都指向`object`。\n* 所有构造函数的的`prototype`方法的`proto`都指向`Object.prototype`（除了….`Object.prototype`自身）\n\n如果理解了上面这些内容，大家可以自行描述一下，构造函数、原型和实例之间的关系.\n* 构造函数首字母必须大写，用来区分普通函数，内部使用`this`指针，指向要生成的实例对象，通过`new`来生成实例对象。 \n* 实例就是通过`new`一个构造函数产生的对象，它有一个属性`[[prototype]]`指向原型 \n* 原型中有一个属性`[[constructor]]`，指向构造函数","slug":"oop_extend","updated":"2018-07-02T17:24:48.816Z","_id":"cjj4dikda0000jzhg42n3ihv6","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"JavaScript面向对象程序设计\"><a href=\"#JavaScript面向对象程序设计\" class=\"headerlink\" title=\"JavaScript面向对象程序设计\"></a>JavaScript面向对象程序设计</h1><p>本文会碰到的知识点：<br>原型、原型链、函数对象、普通对象、继承</p>\n<p>读完本文，可以学到</p>\n<ul>\n<li>面向对象的基本概念</li>\n<li>JavaScript对象属性</li>\n<li>理解JavaScript中的函数对象与普通对象</li>\n<li>理解prototype和proto</li>\n<li>理解原型和原型链</li>\n<li>详解原型链相关的Object方法</li>\n<li>了解如何用ES5模拟类，以及各种方式的优缺点</li>\n<li>了解如何用ES6实现面向对象</li>\n</ul>\n<h2 id=\"一、面向对象的基本概念\"><a href=\"#一、面向对象的基本概念\" class=\"headerlink\" title=\"一、面向对象的基本概念\"></a>一、面向对象的基本概念</h2><p>面向对象也即是OOP，Object Oriented Programming，是计算机的一种编程架构，OOP的基本原则是计算机是由子程序作用的单个或者多个对象组合而成，包含属性和方法的对象是类的实例，但是JavaScript中没有类的概念，而是直接使用对象来实现编程。<br>特性：</p>\n<ul>\n<li>封装：能够将一个实体的信息、功能、响应都封装到一个单独对象中的特性。<br>由于JavaScript没有public、private、protected这些关键字，但是可以利用变量的作用域来模拟public和private封装特性<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> insObject = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _name = <span class=\"string\">'hello'</span>; <span class=\"comment\">// private</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> _name; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insObject._name; <span class=\"comment\">// undefined</span></span><br><span class=\"line\">insObject.getName(); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>这里只是实现了一个简单的版本，private比较好的实现方式可以参考深入理解<code>ES6 145页</code>,protected可以利用ES6的Symbol关键字来实现，这里不展开，有兴趣可以讨论</p>\n<p><strong> 继承：在不改变源程序的基础上进行扩充，原功能得以保存，并且对子程序进行扩展，避免重复代码编写，后面的章节详细描述 </strong></p>\n<h2 id=\"二、JavaScript对象属性\"><a href=\"#二、JavaScript对象属性\" class=\"headerlink\" title=\"二、JavaScript对象属性\"></a>二、JavaScript对象属性</h2><p>想弄懂面向对象，是不是先看看对象是啥呢？<br>我们先看一个题目:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + &#123;&#125;; <span class=\"comment\">// \"[object Object]\"</span></span><br><span class=\"line\">&#123;&#125; + []; <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure></p>\n<p>解释：<br>在第一行中，<code>{}</code>出现在<code>+</code>操作符的表达式中，因此被翻译为一个实际的值（一个空<code>object</code>）。而<code>[]</code>被强制转换为””,因此<code>{}</code>也会被强制转换为一个<code>string:&quot;[object Object]&quot;</code>。<br>但在第二行中，<code>{}</code>被翻译为一个独立的<code>{}</code>空代码块儿（它什么也不做）。块儿不需要分号来终结它们，所以这里缺少分号不是一个问题。最终，<code>+ []</code>是一个将<code>[]</code>明确强制转换 为<code>number</code>的表达式，而它的值是<code>0</code>。</p>\n<h3 id=\"2-1-属性\"><a href=\"#2-1-属性\" class=\"headerlink\" title=\"2.1 属性\"></a>2.1 属性</h3><p><em>对象的属性</em></p>\n<ul>\n<li>Object.prototype Object 的原型对象，不是每个对象都有prototype属性</li>\n<li>Object.prototype.proto 不是标准方法，不鼓励使用，每个对象都有proto属性，但是由于浏览器实现方式的不同，proto属性在chrome、firefox中实现了，在IE中并不支持，替代的方法是Object.getPrototypeOf()</li>\n<li>Object.prototype.constructor：用于创建一个对象的原型，创建对象的构造函数<br>可能大家会有一个疑问，为什么上面那些属性要加上prototype<br>在chrome中打印一下<code>var a = { test: &#39;test&#39; }</code></li>\n</ul>\n<p><em>属性描述符</em><br>数据属性：</p>\n<table>\n<thead>\n<tr>\n<th>特性名称</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>属性的值</td>\n<td>undfined</td>\n</tr>\n<tr>\n<td>writable</td>\n<td>是否可以修改属性的值，true表示可以，false表示不可以</td>\n<td>true</td>\n</tr>\n<tr>\n<td>enumerable</td>\n<td>属性值是否可枚举，true表示可枚举for-in, false表示不可枚举</td>\n<td>true</td>\n</tr>\n<tr>\n<td>configurable</td>\n<td>属性的特性是否可配置，表示能否通过delete删除属性后重新定义属性</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p>例子:<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://sml-myoss.oss-cn-beijing.aliyuncs.com/blog/word_img/20180702231814.png?Expires=1530554407&OSSAccessKeyId=TMP.AQHCd1RMWKjA3RAtZLXmhwWVVeiO5oPvxvXPy7zV9-LMDVLVHCa8kWsTdlk3ADAtAhUAsW-H-UT_inX-jf4Xzb0JhlOCOxQCFBpYwOGJlUIrSpjXzwC7qvaP1jIY&Signature=kyNGDVSXItIbqXY9FKkdnrCnKrs%3D\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<p>访问器属性：</p>\n<table>\n<thead>\n<tr>\n<th>特性名称</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>设置属性时调用的函数</td>\n<td>undefined</td>\n</tr>\n<tr>\n<td>get</td>\n<td>写入属性时调用的函数</td>\n<td>undefined</td>\n</tr>\n<tr>\n<td>configurable</td>\n<td>表示能否通过delete删除属性后重新定义属性</td>\n<td>true</td>\n</tr>\n<tr>\n<td>enumerable</td>\n<td>表示能否通过for-in循环返回属性</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p>访问器属性不能直接定义，一般是通过<code>Object.defineProperty()</code>方法来定义，但是这个方法只支持IE9+， 以前一般用两个非标准方法来实现<code>__defineGetter__()</code>和֖<code>__defineSetter__()</code><br>例子：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123; <span class=\"attr\">_year</span>: <span class=\"number\">2004</span>, <span class=\"attr\">edition</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(book, <span class=\"string\">\"year\"</span>, &#123; </span><br><span class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year; </span><br><span class=\"line\">    &#125;, </span><br><span class=\"line\">    set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newValue</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newValue &gt; <span class=\"number\">2004</span>)&#123; </span><br><span class=\"line\">            <span class=\"keyword\">this</span>._year = newValue; </span><br><span class=\"line\">            <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">book.year = <span class=\"number\">2005</span>; </span><br><span class=\"line\">alert(book.edition);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-2-方法\"><a href=\"#2-2-方法\" class=\"headerlink\" title=\"2.2 方法\"></a>2.2 方法</h3><ul>\n<li>Object.prototype.toString() 返回对象的字符串表示</li>\n<li>Object.prototype.hasOwnProperty() 返回一个布尔值，表示某个对象是否含有指定的属性，而且此属性非原型链继承，也就是说不会检查原型链上的属性</li>\n<li>Object.prototype.isPrototypeOf() 返回一个布尔值，表示指定的对象是否在本对象的原型链中</li>\n<li>Object.prototype.propertyIsEnumerable() 判断指定属性是否可枚举</li>\n<li>Object.prototype.watch() 给对象的某个属性增加监听</li>\n<li>Object.prototype.unwatch() 移除对象某个属性的监听</li>\n<li>Object.prototype.valueOf() 返回指定对象的原始值</li>\n<li>获取和设置属性 <ul>\n<li>Object.defineProperty 定义单个属性</li>\n<li>Object.defineProperties 定义多个属性</li>\n<li>Object.getOwnPropertyDescriptor 获取属性</li>\n</ul>\n</li>\n<li>Object.assign() 拷贝可枚举属性 （ES6新增）</li>\n<li>Object.create() 创建对象</li>\n<li>Object.entries() 返回一个包含由给定对象所有可枚举属性的属性名和属性值组成的 [属性名，属性值] 键值对的数组，数组中键值对的排列顺序和使用for…in循环遍历该对象时返回的顺序一致</li>\n<li>Object.freeze() 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象</li>\n<li>Object.getOwnPropertyNames() 返回指定对象的属性名组成的数组</li>\n<li>Object.getPrototypeOf 返回该对象的原型</li>\n<li>Object.is(value1, value2) 判断两个值是否是同一个值 (ES6 新增)</li>\n<li>Object.keys() 返回一个由给定对象的所有可枚举自身属性的属性名组成的数组，数组中属性名的排列顺序和使用for-in循环遍历该对象时返回的顺序一致</li>\n<li>Object.setPrototypeOf(obj, prototype) 将一个指定的对象的原型设置为另一个对象或者null</li>\n<li>Object.values 返回一个包含指定对象所有的可枚举属性值的数组，数组中的值顺序和使用for…in循环遍历的顺序一样</li>\n</ul>\n<h3 id=\"2-3-应用\"><a href=\"#2-3-应用\" class=\"headerlink\" title=\"2.3 应用\"></a>2.3 应用</h3><p>如何检测某个属性是否在对象中？</p>\n<ul>\n<li><p>in运算符，判断对象是否包含某个属性，会从对象的实例属性、继承属性里进行检测</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dogs</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BigDogs</span>(<span class=\"params\">size</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">BigDogs.prototype = <span class=\"keyword\">new</span> Dogs();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"keyword\">new</span> BigDogs(<span class=\"string\">'big'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'size'</span> <span class=\"keyword\">in</span> a;</span><br><span class=\"line\"><span class=\"string\">'name'</span> <span class=\"keyword\">in</span> a;</span><br><span class=\"line\"><span class=\"string\">'age'</span> <span class=\"keyword\">in</span> a;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.hasOwnProperty()，判断一个对象是否有指定名称的属性，不会检查继承属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'size'</span>);</span><br><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'name'</span>);</span><br><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'age'</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.propertyIsEnumerable()，判断指定名称的属性是否为实例属性并且是可枚举的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// es6</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">Object</span>.create(&#123;&#125;, &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">        value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    age: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">11</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// es5</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperties(b, &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">        value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    age: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">11</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">a.propertyIsEnumerable(<span class=\"string\">'name'</span>);</span><br><span class=\"line\">a.propertyIsEnumerable(<span class=\"string\">'age'</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>如何枚举对象的属性，并保证不同了浏览器中的行为是一致的？<br><code>for/in</code> 语句，可以遍历可枚举的实例属性和继承属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;</span><br><span class=\"line\">  supername: <span class=\"string\">'super hello'</span>,</span><br><span class=\"line\">  superage: <span class=\"string\">'super name'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperties(b, &#123;</span><br><span class=\"line\">  name: &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">      enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  age: &#123;</span><br><span class=\"line\">      value: <span class=\"number\">11</span>,</span><br><span class=\"line\">      enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.setPrototypeOf(b, a); <span class=\"comment\">// 设置b的原型是a 等效的是b.__proto__ = a</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(pro <span class=\"keyword\">in</span> b) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pro); <span class=\"comment\">// name, supername, superage</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.keys()， 返回一个数组，内容是对象可枚举的实例属性名称</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> propertyArray = <span class=\"built_in\">Object</span>.keys(b);</span><br><span class=\"line\"> <span class=\"comment\">// name</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.getOwnPropertyNames()，返回一个数组，内容是对象所有实例属性，包括可枚举和不可枚举</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> propertyArray = <span class=\"built_in\">Object</span>.getOwnPropertyNames(b);</span><br><span class=\"line\"> <span class=\"comment\">// name, age</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>如何判断两个对象是否相等？<br>我只想说，这个问题说简单很简单，说复杂也挺复杂的<a href=\"https://stackoverflow.com/questions/1068834/object-comparison-in-javascript\" target=\"_blank\" rel=\"noopener\">传送门</a><br>我们看个简单版的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isEquivalent</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> aProps = <span class=\"built_in\">Object</span>.getOwnPropertyNames(a);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> bProps = <span class=\"built_in\">Object</span>.getOwnPropertyNames(b);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aProps.length != bProps.length)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; aProps.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> propName = aProps[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a[propName] !== b[propName]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Outputs: true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(isEquivalent(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;));</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>上面这个函数还有啥问题呢</p>\n<pre><code>* 没有对传入参数进行校验，例如判断是否是NaN，或者是其他内置属性\n* 没有判断传入对象的construct和prototype\n* 时间算法复杂度是O(n2)\n</code></pre><p>有同学可能会有疑问，能不能用<code>Object.is</code>，答案是否定的，<code>Object.is</code>简单来说就是在<code>===</code>的基础上特别处理了<code>NaN</code>，<code>+0</code>，<code>-0</code>，保证了<code>-0</code>和<code>+0</code>不相同，<code>Object.is(NaN, NaN)</code>返回<code>true</code>。</p>\n<ul>\n<li>对象的深拷贝和浅拷贝<br>其实如果大家理解了上面的那些方法，是很容易写出深拷贝和浅拷贝的代码的，我们先看一下这两者的却别。<br>浅拷贝仅仅是复制引用，拷贝后a === b， 注意Object.assign方法实现的是浅复制（此处有深刻教训！！！）<br>深拷贝这是创建了一个新的对象，然后把旧的对象中的属性和方法拷贝到新的对象中，拷贝后 a !== b<br>深拷贝的实现由很多例子，例如jQuery的extend和lodash中的cloneDeep, clone。jQuery可以使用$.extend(true, {}, …)来实现深拷贝, 但是jQuery无法复制JSON对象之外的对象，例如ES6引入的Map、Set等。而lodash加入的大量的代码来实现ES6新引入的标准对象 </li>\n</ul>\n<h2 id=\"三、对象分为函数对象和普通对象\"><a href=\"#三、对象分为函数对象和普通对象\" class=\"headerlink\" title=\"三、对象分为函数对象和普通对象\"></a>三、对象分为函数对象和普通对象</h2><p><strong> 什么是函数对象和普通对象？</strong><br>Object、Function、Array、Date等js的内置对象都是函数对象<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a1</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a2 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a3 = <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> b1 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> c1 = [];</span><br><span class=\"line\"><span class=\"keyword\">const</span> c2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> d1 = <span class=\"keyword\">new</span> a1();</span><br><span class=\"line\"><span class=\"keyword\">const</span> d2 = <span class=\"keyword\">new</span> b1(); <span class=\"comment\">// ????</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> d3 = <span class=\"keyword\">new</span> c1(); <span class=\"comment\">// ????</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a2;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a3;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> c1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> c2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> d1;</span><br></pre></td></tr></table></figure></p>\n<p>上面两行报错的原因，是因为构造函数只能由函数来充当，而b1和c1不是Function的实例，所以不能充当构造器<br><strong> 但是只有Function的实例都是函数对象、其他的实例都是普通对象 </strong><br>我们延伸一下，在看个例子<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> e1 = <span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> e2 = <span class=\"keyword\">new</span> e1();</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: e1 is not a constructor</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(e1.constructor) <span class=\"comment\">// 是有值的。。。</span></span><br><span class=\"line\"><span class=\"comment\">// 规范里面就不能new</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> e2 = e1();</span><br></pre></td></tr></table></figure></p>\n<p><code>GeneratorFunction</code>是一个特殊的函数对象<br><code>e1.__proto__.__proto__ === Function.prototype</code></p>\n<p><code>e1</code>的原型实际上是一个生成器函数<code>GeneratorFunction</code>，也就是说<br><code>e1.__proto__ === GeneratorFunction.prototype</code></p>\n<p>这行代码有问题么，啊哈哈哈，<code>GeneratorFunction</code>这个关键字主流的JavaScript还木有暴露出来，所以这个大家理解就好啦</p>\n<p>虽然不能直接<code>new e1</code><br>但是可以<code>new e1.constructor();</code>哈哈哈哈</p>\n<h2 id=\"四、理解prototype和proto\"><a href=\"#四、理解prototype和proto\" class=\"headerlink\" title=\"四、理解prototype和proto\"></a>四、理解prototype和proto</h2><table>\n<thead>\n<tr>\n<th>对象类型</th>\n<th>prototype</th>\n<th>proto</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>函数对象</td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>普通对象</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>只有函数对象具有<code>prototype</code>这个属性</li>\n<li><code>prototype</code>和<code>__proto__</code>都是js在定义一个对象时的预定义属性</li>\n<li><code>prototype</code>是被实例的<code>__proto__</code>指向</li>\n<li><code>__proto__</code>指向构造函数的<code>prototype</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a <span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b <span class=\"comment\">// object</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a.prototype <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a.__proto__ <span class=\"comment\">// function</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b.prototype <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b.__proto__ <span class=\"comment\">// object</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\">b.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>理解了<code>prototype</code>和<code>__proto__</code>之后，我们来看看之前一直说的为什么JavaScript里面都是对象<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> c = []</span><br><span class=\"line\"><span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">a.__proto__</span><br><span class=\"line\">a.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">b.__proto__</span><br><span class=\"line\">b.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">c.__proto__</span><br><span class=\"line\">c.__proto__ === <span class=\"built_in\">Array</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">d.__proto__</span><br><span class=\"line\">d.__proto__ === <span class=\"built_in\">Date</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.__proto__ <span class=\"comment\">//null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Date</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br></pre></td></tr></table></figure></p>\n<p>延伸一个问题：如何判断一个变量是否是数组？</p>\n<ul>\n<li>typeof<br>我们上面已经解释了，这些都是普通对象，普通对象是没有<code>prototype</code>的，他们<code>typeof</code>的值都是<code>object</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> []</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>从原型来看, 原理就是看Array是否在a的原型链中<br>a的原型链是 Array-&gt;Object<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.isPrototypeOf(obj);</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>instanceof<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\">a <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>从构造函数入手，但是这个方法和上面的方法都有一问题，不同的框架中创建的数组不会相互共享其<code>prototype</code>属性<br>根据对象的class属性，跨原型调用<code>tostring</code>方法<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(a);</span><br><span class=\"line\"><span class=\"comment\">// [Object Array]</span></span><br></pre></td></tr></table></figure></p>\n<p>ES5 中所有内置对象的[[Class]]属性的值是由规范定义的，但是 ES6 中已经没有了[[Class]]属性，取代它的是[[NativeBrand]]属性，这个大家有兴趣可以自行去查看规范<br>原理： </p>\n<ol>\n<li>如果<code>this</code>的值为<code>undefined</code>,则返回<code>&#39;[object Undefined]&#39;</code>. </li>\n<li>如果<code>this</code>的值为<code>null</code>,则返回<code>[object Null]</code>. </li>\n<li>让<code>O</code>成为调用<code>ToObject(this)</code>的结果. </li>\n<li>让<code>class</code>成为<code>O</code>的内部属性<code>[[Class]]</code>的值. </li>\n<li>返回三个字符串<code>&#39;[object &#39;</code>, <code>&#39;class&#39;</code>, 以及 <code>&#39;]&#39;</code>连接后的新字符串.</li>\n</ol>\n<p>问题？这个一定是正确的么？不正确为啥？<br>提示ES6的<code>Symbol</code>属性<br><code>Array.isArray()</code><br>部分浏览器中不兼容</p>\n<h2 id=\"五、理解原型与原型链\"><a href=\"#五、理解原型与原型链\" class=\"headerlink\" title=\"五、理解原型与原型链\"></a>五、理解原型与原型链</h2><p>其实上一节中的<code>prototype</code>和<code>proto</code>就是为了构建原型链而存在的，之前也或多或少的说到了原型链这个概念。</p>\n<p>看下面的代码:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Dogs = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Dogs.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sijing = <span class=\"keyword\">new</span> Dogs(<span class=\"string\">'sijing'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sijing);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sijing.getName());</span><br></pre></td></tr></table></figure></p>\n<p>这段代码的执行过程 </p>\n<ol>\n<li>首先创建了一个构造函数<code>Dogs</code>，传入一个参数<code>name</code>，<code>Dogs.prototype</code>也会自动创建 </li>\n<li>给对象<code>dogs</code>增加了一个方法 </li>\n<li>通过构造函数<code>Dogs</code>实例化了一个对象<code>sijing</code></li>\n<li>输出<code>sijing</code>的值<br> 可以看到<code>sijing</code>有两个值<code>name</code>和<code>proto</code>,其中<code>proto</code>指向<code>Dogs.prototype</code> </li>\n<li>执行<code>getName</code>方法时，在<code>sijing</code>中找不到这个方法，就会继续向着原型链继续往上找，也就是通过<code>proto</code>，然后就找到了<code>getName</code>方法。</li>\n</ol>\n<p>这个过程实际上就是原型继承，实际上JavaScript的原型继承就是利用了<code>proto</code>并借助<code>prototype</code>来实现的。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sijing.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">Dogs.prototype <span class=\"comment\">// 指向什么</span></span><br><span class=\"line\">Dogs.prototype.__proto__ <span class=\"comment\">// 指向什么</span></span><br><span class=\"line\">Dogs.prototype.__proto__.__proto__ <span class=\"comment\">// 指向什么</span></span><br></pre></td></tr></table></figure></p>\n<p>上面例子中<code>getName</code>最终是查找到了，那么如果在原型链中一直没查找到，会怎么样？<br>例如<code>console.log(sijing.age)</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sijing <span class=\"comment\">// 是一个对象可以继续</span></span><br><span class=\"line\">sijing.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__ <span class=\"comment\">// 是一个对象可以继续</span></span><br><span class=\"line\">sijing.__proto__.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__ <span class=\"comment\">// 是个对象可以继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__.__proto__ <span class=\"literal\">null</span>，<span class=\"comment\">// 不是对象，到头啦</span></span><br></pre></td></tr></table></figure></p>\n<p><strong> 原型链 </strong> 的概念其实不重要，重要的是要理解，简单来说，原型链就是利用原型让一个引用类型继承另一个应用类型的属性和方法。</p>\n<p>还有三点需要注意的:</p>\n<ul>\n<li>任何内置函数对象（类）本身的 <code>_proto_</code>都指向<code>Function</code>的原型对象；</li>\n<li>除了<code>Object</code>的原型对象的<code>_proto_</code>指向<code>null</code>，其他所有内置函数对象的原型对象的<code>_proto_</code>都指向<code>object</code>。</li>\n<li>所有构造函数的的<code>prototype</code>方法的<code>proto</code>都指向<code>Object.prototype</code>（除了….<code>Object.prototype</code>自身）</li>\n</ul>\n<p>如果理解了上面这些内容，大家可以自行描述一下，构造函数、原型和实例之间的关系.</p>\n<ul>\n<li>构造函数首字母必须大写，用来区分普通函数，内部使用<code>this</code>指针，指向要生成的实例对象，通过<code>new</code>来生成实例对象。 </li>\n<li>实例就是通过<code>new</code>一个构造函数产生的对象，它有一个属性<code>[[prototype]]</code>指向原型 </li>\n<li>原型中有一个属性<code>[[constructor]]</code>，指向构造函数</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"JavaScript面向对象程序设计\"><a href=\"#JavaScript面向对象程序设计\" class=\"headerlink\" title=\"JavaScript面向对象程序设计\"></a>JavaScript面向对象程序设计</h1><p>本文会碰到的知识点：<br>原型、原型链、函数对象、普通对象、继承</p>\n<p>读完本文，可以学到</p>\n<ul>\n<li>面向对象的基本概念</li>\n<li>JavaScript对象属性</li>\n<li>理解JavaScript中的函数对象与普通对象</li>\n<li>理解prototype和proto</li>\n<li>理解原型和原型链</li>\n<li>详解原型链相关的Object方法</li>\n<li>了解如何用ES5模拟类，以及各种方式的优缺点</li>\n<li>了解如何用ES6实现面向对象</li>\n</ul>\n<h2 id=\"一、面向对象的基本概念\"><a href=\"#一、面向对象的基本概念\" class=\"headerlink\" title=\"一、面向对象的基本概念\"></a>一、面向对象的基本概念</h2><p>面向对象也即是OOP，Object Oriented Programming，是计算机的一种编程架构，OOP的基本原则是计算机是由子程序作用的单个或者多个对象组合而成，包含属性和方法的对象是类的实例，但是JavaScript中没有类的概念，而是直接使用对象来实现编程。<br>特性：</p>\n<ul>\n<li>封装：能够将一个实体的信息、功能、响应都封装到一个单独对象中的特性。<br>由于JavaScript没有public、private、protected这些关键字，但是可以利用变量的作用域来模拟public和private封装特性<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> insObject = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> _name = <span class=\"string\">'hello'</span>; <span class=\"comment\">// private</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        getName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> _name; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">insObject._name; <span class=\"comment\">// undefined</span></span><br><span class=\"line\">insObject.getName(); <span class=\"comment\">// hello</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>这里只是实现了一个简单的版本，private比较好的实现方式可以参考深入理解<code>ES6 145页</code>,protected可以利用ES6的Symbol关键字来实现，这里不展开，有兴趣可以讨论</p>\n<p><strong> 继承：在不改变源程序的基础上进行扩充，原功能得以保存，并且对子程序进行扩展，避免重复代码编写，后面的章节详细描述 </strong></p>\n<h2 id=\"二、JavaScript对象属性\"><a href=\"#二、JavaScript对象属性\" class=\"headerlink\" title=\"二、JavaScript对象属性\"></a>二、JavaScript对象属性</h2><p>想弄懂面向对象，是不是先看看对象是啥呢？<br>我们先看一个题目:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[] + &#123;&#125;; <span class=\"comment\">// \"[object Object]\"</span></span><br><span class=\"line\">&#123;&#125; + []; <span class=\"comment\">// 0</span></span><br></pre></td></tr></table></figure></p>\n<p>解释：<br>在第一行中，<code>{}</code>出现在<code>+</code>操作符的表达式中，因此被翻译为一个实际的值（一个空<code>object</code>）。而<code>[]</code>被强制转换为””,因此<code>{}</code>也会被强制转换为一个<code>string:&quot;[object Object]&quot;</code>。<br>但在第二行中，<code>{}</code>被翻译为一个独立的<code>{}</code>空代码块儿（它什么也不做）。块儿不需要分号来终结它们，所以这里缺少分号不是一个问题。最终，<code>+ []</code>是一个将<code>[]</code>明确强制转换 为<code>number</code>的表达式，而它的值是<code>0</code>。</p>\n<h3 id=\"2-1-属性\"><a href=\"#2-1-属性\" class=\"headerlink\" title=\"2.1 属性\"></a>2.1 属性</h3><p><em>对象的属性</em></p>\n<ul>\n<li>Object.prototype Object 的原型对象，不是每个对象都有prototype属性</li>\n<li>Object.prototype.proto 不是标准方法，不鼓励使用，每个对象都有proto属性，但是由于浏览器实现方式的不同，proto属性在chrome、firefox中实现了，在IE中并不支持，替代的方法是Object.getPrototypeOf()</li>\n<li>Object.prototype.constructor：用于创建一个对象的原型，创建对象的构造函数<br>可能大家会有一个疑问，为什么上面那些属性要加上prototype<br>在chrome中打印一下<code>var a = { test: &#39;test&#39; }</code></li>\n</ul>\n<p><em>属性描述符</em><br>数据属性：</p>\n<table>\n<thead>\n<tr>\n<th>特性名称</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>属性的值</td>\n<td>undfined</td>\n</tr>\n<tr>\n<td>writable</td>\n<td>是否可以修改属性的值，true表示可以，false表示不可以</td>\n<td>true</td>\n</tr>\n<tr>\n<td>enumerable</td>\n<td>属性值是否可枚举，true表示可枚举for-in, false表示不可枚举</td>\n<td>true</td>\n</tr>\n<tr>\n<td>configurable</td>\n<td>属性的特性是否可配置，表示能否通过delete删除属性后重新定义属性</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p>例子:<br><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://sml-myoss.oss-cn-beijing.aliyuncs.com/blog/word_img/20180702231814.png?Expires=1530554407&OSSAccessKeyId=TMP.AQHCd1RMWKjA3RAtZLXmhwWVVeiO5oPvxvXPy7zV9-LMDVLVHCa8kWsTdlk3ADAtAhUAsW-H-UT_inX-jf4Xzb0JhlOCOxQCFBpYwOGJlUIrSpjXzwC7qvaP1jIY&Signature=kyNGDVSXItIbqXY9FKkdnrCnKrs%3D\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></p>\n<p>访问器属性：</p>\n<table>\n<thead>\n<tr>\n<th>特性名称</th>\n<th>描述</th>\n<th>默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>设置属性时调用的函数</td>\n<td>undefined</td>\n</tr>\n<tr>\n<td>get</td>\n<td>写入属性时调用的函数</td>\n<td>undefined</td>\n</tr>\n<tr>\n<td>configurable</td>\n<td>表示能否通过delete删除属性后重新定义属性</td>\n<td>true</td>\n</tr>\n<tr>\n<td>enumerable</td>\n<td>表示能否通过for-in循环返回属性</td>\n<td>true</td>\n</tr>\n</tbody>\n</table>\n<p>访问器属性不能直接定义，一般是通过<code>Object.defineProperty()</code>方法来定义，但是这个方法只支持IE9+， 以前一般用两个非标准方法来实现<code>__defineGetter__()</code>和֖<code>__defineSetter__()</code><br>例子：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> book = &#123; <span class=\"attr\">_year</span>: <span class=\"number\">2004</span>, <span class=\"attr\">edition</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(book, <span class=\"string\">\"year\"</span>, &#123; </span><br><span class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123; </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._year; </span><br><span class=\"line\">    &#125;, </span><br><span class=\"line\">    set: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">newValue</span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newValue &gt; <span class=\"number\">2004</span>)&#123; </span><br><span class=\"line\">            <span class=\"keyword\">this</span>._year = newValue; </span><br><span class=\"line\">            <span class=\"keyword\">this</span>.edition += newValue - <span class=\"number\">2004</span>; </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">book.year = <span class=\"number\">2005</span>; </span><br><span class=\"line\">alert(book.edition);</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-2-方法\"><a href=\"#2-2-方法\" class=\"headerlink\" title=\"2.2 方法\"></a>2.2 方法</h3><ul>\n<li>Object.prototype.toString() 返回对象的字符串表示</li>\n<li>Object.prototype.hasOwnProperty() 返回一个布尔值，表示某个对象是否含有指定的属性，而且此属性非原型链继承，也就是说不会检查原型链上的属性</li>\n<li>Object.prototype.isPrototypeOf() 返回一个布尔值，表示指定的对象是否在本对象的原型链中</li>\n<li>Object.prototype.propertyIsEnumerable() 判断指定属性是否可枚举</li>\n<li>Object.prototype.watch() 给对象的某个属性增加监听</li>\n<li>Object.prototype.unwatch() 移除对象某个属性的监听</li>\n<li>Object.prototype.valueOf() 返回指定对象的原始值</li>\n<li>获取和设置属性 <ul>\n<li>Object.defineProperty 定义单个属性</li>\n<li>Object.defineProperties 定义多个属性</li>\n<li>Object.getOwnPropertyDescriptor 获取属性</li>\n</ul>\n</li>\n<li>Object.assign() 拷贝可枚举属性 （ES6新增）</li>\n<li>Object.create() 创建对象</li>\n<li>Object.entries() 返回一个包含由给定对象所有可枚举属性的属性名和属性值组成的 [属性名，属性值] 键值对的数组，数组中键值对的排列顺序和使用for…in循环遍历该对象时返回的顺序一致</li>\n<li>Object.freeze() 冻结一个对象，冻结指的是不能向这个对象添加新的属性，不能修改其已有属性的值，不能删除已有属性，以及不能修改该对象已有属性的可枚举性、可配置性、可写性。也就是说，这个对象永远是不可变的。该方法返回被冻结的对象</li>\n<li>Object.getOwnPropertyNames() 返回指定对象的属性名组成的数组</li>\n<li>Object.getPrototypeOf 返回该对象的原型</li>\n<li>Object.is(value1, value2) 判断两个值是否是同一个值 (ES6 新增)</li>\n<li>Object.keys() 返回一个由给定对象的所有可枚举自身属性的属性名组成的数组，数组中属性名的排列顺序和使用for-in循环遍历该对象时返回的顺序一致</li>\n<li>Object.setPrototypeOf(obj, prototype) 将一个指定的对象的原型设置为另一个对象或者null</li>\n<li>Object.values 返回一个包含指定对象所有的可枚举属性值的数组，数组中的值顺序和使用for…in循环遍历的顺序一样</li>\n</ul>\n<h3 id=\"2-3-应用\"><a href=\"#2-3-应用\" class=\"headerlink\" title=\"2.3 应用\"></a>2.3 应用</h3><p>如何检测某个属性是否在对象中？</p>\n<ul>\n<li><p>in运算符，判断对象是否包含某个属性，会从对象的实例属性、继承属性里进行检测</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dogs</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">BigDogs</span>(<span class=\"params\">size</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.size = size;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">BigDogs.prototype = <span class=\"keyword\">new</span> Dogs();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"keyword\">new</span> BigDogs(<span class=\"string\">'big'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'size'</span> <span class=\"keyword\">in</span> a;</span><br><span class=\"line\"><span class=\"string\">'name'</span> <span class=\"keyword\">in</span> a;</span><br><span class=\"line\"><span class=\"string\">'age'</span> <span class=\"keyword\">in</span> a;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.hasOwnProperty()，判断一个对象是否有指定名称的属性，不会检查继承属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'size'</span>);</span><br><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'name'</span>);</span><br><span class=\"line\">a.hasOwnProperty(<span class=\"string\">'age'</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.propertyIsEnumerable()，判断指定名称的属性是否为实例属性并且是可枚举的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// es6</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">Object</span>.create(&#123;&#125;, &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">        value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    age: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">11</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// es5</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperties(b, &#123;</span><br><span class=\"line\">    name: &#123;</span><br><span class=\"line\">        value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    age: &#123;</span><br><span class=\"line\">        value: <span class=\"number\">11</span>,</span><br><span class=\"line\">        enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">a.propertyIsEnumerable(<span class=\"string\">'name'</span>);</span><br><span class=\"line\">a.propertyIsEnumerable(<span class=\"string\">'age'</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>如何枚举对象的属性，并保证不同了浏览器中的行为是一致的？<br><code>for/in</code> 语句，可以遍历可枚举的实例属性和继承属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = &#123;</span><br><span class=\"line\">  supername: <span class=\"string\">'super hello'</span>,</span><br><span class=\"line\">  superage: <span class=\"string\">'super name'</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = &#123;&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperties(b, &#123;</span><br><span class=\"line\">  name: &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'hello'</span>,</span><br><span class=\"line\">      enumerable: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  age: &#123;</span><br><span class=\"line\">      value: <span class=\"number\">11</span>,</span><br><span class=\"line\">      enumerable: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125; </span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.setPrototypeOf(b, a); <span class=\"comment\">// 设置b的原型是a 等效的是b.__proto__ = a</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(pro <span class=\"keyword\">in</span> b) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pro); <span class=\"comment\">// name, supername, superage</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.keys()， 返回一个数组，内容是对象可枚举的实例属性名称</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> propertyArray = <span class=\"built_in\">Object</span>.keys(b);</span><br><span class=\"line\"> <span class=\"comment\">// name</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Object.getOwnPropertyNames()，返回一个数组，内容是对象所有实例属性，包括可枚举和不可枚举</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> propertyArray = <span class=\"built_in\">Object</span>.getOwnPropertyNames(b);</span><br><span class=\"line\"> <span class=\"comment\">// name, age</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>如何判断两个对象是否相等？<br>我只想说，这个问题说简单很简单，说复杂也挺复杂的<a href=\"https://stackoverflow.com/questions/1068834/object-comparison-in-javascript\" target=\"_blank\" rel=\"noopener\">传送门</a><br>我们看个简单版的</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isEquivalent</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> aProps = <span class=\"built_in\">Object</span>.getOwnPropertyNames(a);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> bProps = <span class=\"built_in\">Object</span>.getOwnPropertyNames(b);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (aProps.length != bProps.length)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; aProps.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> propName = aProps[i];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (a[propName] !== b[propName]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Outputs: true</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(isEquivalent(&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;,&#123;<span class=\"attr\">a</span>:<span class=\"number\">1</span>&#125;));</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>上面这个函数还有啥问题呢</p>\n<pre><code>* 没有对传入参数进行校验，例如判断是否是NaN，或者是其他内置属性\n* 没有判断传入对象的construct和prototype\n* 时间算法复杂度是O(n2)\n</code></pre><p>有同学可能会有疑问，能不能用<code>Object.is</code>，答案是否定的，<code>Object.is</code>简单来说就是在<code>===</code>的基础上特别处理了<code>NaN</code>，<code>+0</code>，<code>-0</code>，保证了<code>-0</code>和<code>+0</code>不相同，<code>Object.is(NaN, NaN)</code>返回<code>true</code>。</p>\n<ul>\n<li>对象的深拷贝和浅拷贝<br>其实如果大家理解了上面的那些方法，是很容易写出深拷贝和浅拷贝的代码的，我们先看一下这两者的却别。<br>浅拷贝仅仅是复制引用，拷贝后a === b， 注意Object.assign方法实现的是浅复制（此处有深刻教训！！！）<br>深拷贝这是创建了一个新的对象，然后把旧的对象中的属性和方法拷贝到新的对象中，拷贝后 a !== b<br>深拷贝的实现由很多例子，例如jQuery的extend和lodash中的cloneDeep, clone。jQuery可以使用$.extend(true, {}, …)来实现深拷贝, 但是jQuery无法复制JSON对象之外的对象，例如ES6引入的Map、Set等。而lodash加入的大量的代码来实现ES6新引入的标准对象 </li>\n</ul>\n<h2 id=\"三、对象分为函数对象和普通对象\"><a href=\"#三、对象分为函数对象和普通对象\" class=\"headerlink\" title=\"三、对象分为函数对象和普通对象\"></a>三、对象分为函数对象和普通对象</h2><p><strong> 什么是函数对象和普通对象？</strong><br>Object、Function、Array、Date等js的内置对象都是函数对象<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a1</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a2 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> a3 = <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> b1 = &#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> c1 = [];</span><br><span class=\"line\"><span class=\"keyword\">const</span> c2 = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> d1 = <span class=\"keyword\">new</span> a1();</span><br><span class=\"line\"><span class=\"keyword\">const</span> d2 = <span class=\"keyword\">new</span> b1(); <span class=\"comment\">// ????</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> d3 = <span class=\"keyword\">new</span> c1(); <span class=\"comment\">// ????</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a2;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a3;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> c1;</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> c2;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> d1;</span><br></pre></td></tr></table></figure></p>\n<p>上面两行报错的原因，是因为构造函数只能由函数来充当，而b1和c1不是Function的实例，所以不能充当构造器<br><strong> 但是只有Function的实例都是函数对象、其他的实例都是普通对象 </strong><br>我们延伸一下，在看个例子<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> e1 = <span class=\"function\"><span class=\"keyword\">function</span> *(<span class=\"params\"></span>)</span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> e2 = <span class=\"keyword\">new</span> e1();</span><br><span class=\"line\"><span class=\"comment\">// Uncaught TypeError: e1 is not a constructor</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(e1.constructor) <span class=\"comment\">// 是有值的。。。</span></span><br><span class=\"line\"><span class=\"comment\">// 规范里面就不能new</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> e2 = e1();</span><br></pre></td></tr></table></figure></p>\n<p><code>GeneratorFunction</code>是一个特殊的函数对象<br><code>e1.__proto__.__proto__ === Function.prototype</code></p>\n<p><code>e1</code>的原型实际上是一个生成器函数<code>GeneratorFunction</code>，也就是说<br><code>e1.__proto__ === GeneratorFunction.prototype</code></p>\n<p>这行代码有问题么，啊哈哈哈，<code>GeneratorFunction</code>这个关键字主流的JavaScript还木有暴露出来，所以这个大家理解就好啦</p>\n<p>虽然不能直接<code>new e1</code><br>但是可以<code>new e1.constructor();</code>哈哈哈哈</p>\n<h2 id=\"四、理解prototype和proto\"><a href=\"#四、理解prototype和proto\" class=\"headerlink\" title=\"四、理解prototype和proto\"></a>四、理解prototype和proto</h2><table>\n<thead>\n<tr>\n<th>对象类型</th>\n<th>prototype</th>\n<th>proto</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>函数对象</td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>普通对象</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>只有函数对象具有<code>prototype</code>这个属性</li>\n<li><code>prototype</code>和<code>__proto__</code>都是js在定义一个对象时的预定义属性</li>\n<li><code>prototype</code>是被实例的<code>__proto__</code>指向</li>\n<li><code>__proto__</code>指向构造函数的<code>prototype</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a <span class=\"comment\">// function</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b <span class=\"comment\">// object</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a.prototype <span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> a.__proto__ <span class=\"comment\">// function</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b.prototype <span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> b.__proto__ <span class=\"comment\">// object</span></span><br><span class=\"line\"></span><br><span class=\"line\">a.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\">b.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>理解了<code>prototype</code>和<code>__proto__</code>之后，我们来看看之前一直说的为什么JavaScript里面都是对象<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> c = []</span><br><span class=\"line\"><span class=\"keyword\">const</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">a.__proto__</span><br><span class=\"line\">a.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">b.__proto__</span><br><span class=\"line\">b.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">c.__proto__</span><br><span class=\"line\">c.__proto__ === <span class=\"built_in\">Array</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">d.__proto__</span><br><span class=\"line\">d.__proto__ === <span class=\"built_in\">Date</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.__proto__ <span class=\"comment\">//null</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Date</span>.prototype.__proto__ === <span class=\"built_in\">Object</span>.prototype</span><br></pre></td></tr></table></figure></p>\n<p>延伸一个问题：如何判断一个变量是否是数组？</p>\n<ul>\n<li>typeof<br>我们上面已经解释了，这些都是普通对象，普通对象是没有<code>prototype</code>的，他们<code>typeof</code>的值都是<code>object</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">typeof</span> []</span><br><span class=\"line\"><span class=\"keyword\">typeof</span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>从原型来看, 原理就是看Array是否在a的原型链中<br>a的原型链是 Array-&gt;Object<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.isPrototypeOf(obj);</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>instanceof<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\">a <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>从构造函数入手，但是这个方法和上面的方法都有一问题，不同的框架中创建的数组不会相互共享其<code>prototype</code>属性<br>根据对象的class属性，跨原型调用<code>tostring</code>方法<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\"><span class=\"built_in\">Object</span>.prototype.toString.call(a);</span><br><span class=\"line\"><span class=\"comment\">// [Object Array]</span></span><br></pre></td></tr></table></figure></p>\n<p>ES5 中所有内置对象的[[Class]]属性的值是由规范定义的，但是 ES6 中已经没有了[[Class]]属性，取代它的是[[NativeBrand]]属性，这个大家有兴趣可以自行去查看规范<br>原理： </p>\n<ol>\n<li>如果<code>this</code>的值为<code>undefined</code>,则返回<code>&#39;[object Undefined]&#39;</code>. </li>\n<li>如果<code>this</code>的值为<code>null</code>,则返回<code>[object Null]</code>. </li>\n<li>让<code>O</code>成为调用<code>ToObject(this)</code>的结果. </li>\n<li>让<code>class</code>成为<code>O</code>的内部属性<code>[[Class]]</code>的值. </li>\n<li>返回三个字符串<code>&#39;[object &#39;</code>, <code>&#39;class&#39;</code>, 以及 <code>&#39;]&#39;</code>连接后的新字符串.</li>\n</ol>\n<p>问题？这个一定是正确的么？不正确为啥？<br>提示ES6的<code>Symbol</code>属性<br><code>Array.isArray()</code><br>部分浏览器中不兼容</p>\n<h2 id=\"五、理解原型与原型链\"><a href=\"#五、理解原型与原型链\" class=\"headerlink\" title=\"五、理解原型与原型链\"></a>五、理解原型与原型链</h2><p>其实上一节中的<code>prototype</code>和<code>proto</code>就是为了构建原型链而存在的，之前也或多或少的说到了原型链这个概念。</p>\n<p>看下面的代码:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Dogs = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Dogs.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sijing = <span class=\"keyword\">new</span> Dogs(<span class=\"string\">'sijing'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sijing);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(sijing.getName());</span><br></pre></td></tr></table></figure></p>\n<p>这段代码的执行过程 </p>\n<ol>\n<li>首先创建了一个构造函数<code>Dogs</code>，传入一个参数<code>name</code>，<code>Dogs.prototype</code>也会自动创建 </li>\n<li>给对象<code>dogs</code>增加了一个方法 </li>\n<li>通过构造函数<code>Dogs</code>实例化了一个对象<code>sijing</code></li>\n<li>输出<code>sijing</code>的值<br> 可以看到<code>sijing</code>有两个值<code>name</code>和<code>proto</code>,其中<code>proto</code>指向<code>Dogs.prototype</code> </li>\n<li>执行<code>getName</code>方法时，在<code>sijing</code>中找不到这个方法，就会继续向着原型链继续往上找，也就是通过<code>proto</code>，然后就找到了<code>getName</code>方法。</li>\n</ol>\n<p>这个过程实际上就是原型继承，实际上JavaScript的原型继承就是利用了<code>proto</code>并借助<code>prototype</code>来实现的。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sijing.__proto__ === <span class=\"built_in\">Function</span>.prototype</span><br><span class=\"line\"></span><br><span class=\"line\">Dogs.prototype <span class=\"comment\">// 指向什么</span></span><br><span class=\"line\">Dogs.prototype.__proto__ <span class=\"comment\">// 指向什么</span></span><br><span class=\"line\">Dogs.prototype.__proto__.__proto__ <span class=\"comment\">// 指向什么</span></span><br></pre></td></tr></table></figure></p>\n<p>上面例子中<code>getName</code>最终是查找到了，那么如果在原型链中一直没查找到，会怎么样？<br>例如<code>console.log(sijing.age)</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sijing <span class=\"comment\">// 是一个对象可以继续</span></span><br><span class=\"line\">sijing.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__ <span class=\"comment\">// 是一个对象可以继续</span></span><br><span class=\"line\">sijing.__proto__.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__ <span class=\"comment\">// 是个对象可以继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__.age <span class=\"comment\">// 不存在，继续</span></span><br><span class=\"line\">sijing.__proto__.__proto__.__proto__ <span class=\"literal\">null</span>，<span class=\"comment\">// 不是对象，到头啦</span></span><br></pre></td></tr></table></figure></p>\n<p><strong> 原型链 </strong> 的概念其实不重要，重要的是要理解，简单来说，原型链就是利用原型让一个引用类型继承另一个应用类型的属性和方法。</p>\n<p>还有三点需要注意的:</p>\n<ul>\n<li>任何内置函数对象（类）本身的 <code>_proto_</code>都指向<code>Function</code>的原型对象；</li>\n<li>除了<code>Object</code>的原型对象的<code>_proto_</code>指向<code>null</code>，其他所有内置函数对象的原型对象的<code>_proto_</code>都指向<code>object</code>。</li>\n<li>所有构造函数的的<code>prototype</code>方法的<code>proto</code>都指向<code>Object.prototype</code>（除了….<code>Object.prototype</code>自身）</li>\n</ul>\n<p>如果理解了上面这些内容，大家可以自行描述一下，构造函数、原型和实例之间的关系.</p>\n<ul>\n<li>构造函数首字母必须大写，用来区分普通函数，内部使用<code>this</code>指针，指向要生成的实例对象，通过<code>new</code>来生成实例对象。 </li>\n<li>实例就是通过<code>new</code>一个构造函数产生的对象，它有一个属性<code>[[prototype]]</code>指向原型 </li>\n<li>原型中有一个属性<code>[[constructor]]</code>，指向构造函数</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjiwj9kgf0003ior4r39kfnq0","category_id":"cjiwk65kq0000uur4fd3ipphb","_id":"cjiwk65kr0001uur4mies7984"},{"post_id":"cjivgw1xo000367r4lgay4k2r","category_id":"cjiwk6gg40002uur4hkz7nvh6","_id":"cjiwk6gg40003uur43jycuo9q"},{"post_id":"cjj2jufh400035uhgiry812ns","category_id":"cjj2jvthg00045uhgp27wbc62","_id":"cjj2jvthh00075uhgd73r3o3t"},{"post_id":"cjj4dikda0000jzhg42n3ihv6","category_id":"cjj2jvthg00045uhgp27wbc62","_id":"cjj4e6vpi0002jzhgpje1hwix"}],"PostTag":[{"post_id":"cjivgw1xh000067r4av45d7bl","tag_id":"cjivgw1xm000267r4vntxe4ny","_id":"cjivgw1xp000567r4kv6i7cwm"},{"post_id":"cjivgw1xk000167r4epcrgu1g","tag_id":"cjivgw1xp000467r41dfppiaq","_id":"cjivgw1xq000767r4sewq9bd0"},{"post_id":"cjivgw1xo000367r4lgay4k2r","tag_id":"cjivgw1xq000667r4yft07qdq","_id":"cjivgw1xq000967r4dsy3vr5q"},{"post_id":"cjivgw1xo000367r4lgay4k2r","tag_id":"cjivgw1xq000867r4ygd4rm8j","_id":"cjivgw1xr000a67r4cz9p4rsp"},{"post_id":"cjiwj9kgf0003ior4r39kfnq0","tag_id":"cjivgw1xq000667r4yft07qdq","_id":"cjiwj9kgh0004ior40yslutnm"},{"post_id":"cjiwj9kgf0003ior4r39kfnq0","tag_id":"cjiwjbbv50006ior4jwvt3m2c","_id":"cjiwjbbv60007ior447vs6ujo"},{"post_id":"cjj2iwmav00005uhgkljwhwz4","tag_id":"cjj2j4exb00015uhg41rpbb45","_id":"cjj2j4exc00025uhgzus32sjo"},{"post_id":"cjj2jufh400035uhgiry812ns","tag_id":"cjj2jvthg00055uhgnohhfpj1","_id":"cjj2jvthh00065uhgkw9x52at"},{"post_id":"cjj4dikda0000jzhg42n3ihv6","tag_id":"cjj4e6vpi0001jzhgryl4y5u2","_id":"cjj4e6vpj0004jzhgqst7e0id"},{"post_id":"cjj4dikda0000jzhg42n3ihv6","tag_id":"cjj4e6vpi0003jzhge5opxt5r","_id":"cjj4e6vpj0005jzhgu96nnuoc"}],"Tag":[{"name":"hello","_id":"cjivgw1xm000267r4vntxe4ny"},{"name":"test","_id":"cjivgw1xp000467r41dfppiaq"},{"name":"网站","_id":"cjivgw1xq000667r4yft07qdq"},{"name":"前端","_id":"cjivgw1xq000867r4ygd4rm8j"},{"name":"Test","_id":"cjiwjbbv50006ior4jwvt3m2c"},{"name":"First","_id":"cjj2j4exb00015uhg41rpbb45"},{"name":"闭包","_id":"cjj2jvthg00055uhgnohhfpj1"},{"name":"面向对象","_id":"cjj4e6vpi0001jzhgryl4y5u2"},{"name":"继承","_id":"cjj4e6vpi0003jzhge5opxt5r"}]}}